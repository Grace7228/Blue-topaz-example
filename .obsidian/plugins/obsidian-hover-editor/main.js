/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var fa=Object.create;var Nt=Object.defineProperty;var ha=Object.getOwnPropertyDescriptor;var va=Object.getOwnPropertyNames;var ga=Object.getPrototypeOf,ma=Object.prototype.hasOwnProperty;var vi=m=>Nt(m,"__esModule",{value:!0});var gi=(m,s)=>()=>(s||m((s={exports:{}}).exports,s),s.exports),ya=(m,s)=>{vi(m);for(var u in s)Nt(m,u,{get:s[u],enumerable:!0})},ba=(m,s,u)=>{if(s&&typeof s=="object"||typeof s=="function")for(let h of va(s))!ma.call(m,h)&&h!=="default"&&Nt(m,h,{get:()=>s[h],enumerable:!(u=ha(s,h))||u.enumerable});return m},Ne=m=>ba(vi(Nt(m!=null?fa(ga(m)):{},"default",m&&m.__esModule&&"default"in m?{get:()=>m.default,enumerable:!0}:{value:m,enumerable:!0})),m);var Ii=gi((es,Di)=>{Di.exports=function(s,u){u||(u=[0,""]),s=String(s);var h=parseFloat(s,10);return u[0]=h,u[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",u}});var ji=gi((Li,Wn)=>{(function(m){typeof Li=="object"&&typeof Wn!="undefined"?Wn.exports=m():typeof define=="function"&&define.amd?define([],m):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).interact=m()})(function(){var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0,m.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.init=g,s.getWindow=function(e){return(0,m.default)(e)?e:(e.ownerDocument||e).defaultView||h.window},s.window=s.realWindow=void 0;var u=void 0;s.realWindow=u;var h=void 0;function g(e){s.realWindow=u=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),s.window=h=e}s.window=h,typeof window!="undefined"&&window&&g(window);var p={};function S(e){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var P=function(e){return!!e&&S(e)==="object"},M=function(e){return typeof e=="function"},O={window:function(e){return e===s.window||(0,m.default)(e)},docFrag:function(e){return P(e)&&e.nodeType===11},object:P,func:M,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||S(e)!=="object")return!1;var t=s.getWindow(e)||s.window;return/object|function/.test(S(t.Element))?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return P(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return P(e)&&e.length!==void 0&&M(e.splice)}};p.default=O;var U={};function k(e){var t=e.interaction;if(t.prepared.name==="drag"){var o=t.prepared.axis;o==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):o==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function B(e){var t=e.iEvent,o=e.interaction;if(o.prepared.name==="drag"){var n=o.prepared.axis;if(n==="x"||n==="y"){var i=n==="x"?"y":"x";t.page[i]=o.coords.start.page[i],t.client[i]=o.coords.start.client[i],t.delta[i]=0}}}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var W={id:"actions/drag",install:function(e){var t=e.actions,o=e.Interactable,n=e.defaults;o.prototype.draggable=W.draggable,t.map.drag=W,t.methodDict.drag="draggable",n.actions.drag=W.defaults},listeners:{"interactions:before-action-move":k,"interactions:action-resume":k,"interactions:action-move":B,"auto-start:check":function(e){var t=e.interaction,o=e.interactable,n=e.buttons,i=o.options.drag;if(i&&i.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(n&o.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:i.lockAxis==="start"?i.startAxis:i.lockAxis},!1}},draggable:function(e){return p.default.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):p.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:k,move:B,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},N=W;U.default=N;var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=void 0;var H={init:function(e){var t=e;H.document=t.document,H.DocumentFragment=t.DocumentFragment||oe,H.SVGElement=t.SVGElement||oe,H.SVGSVGElement=t.SVGSVGElement||oe,H.SVGElementInstance=t.SVGElementInstance||oe,H.Element=t.Element||oe,H.HTMLElement=t.HTMLElement||H.Element,H.Event=t.Event,H.Touch=t.Touch||oe,H.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function oe(){}var de=H;I.default=de;var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0;var K={init:function(e){var t=I.default.Element,o=e.navigator||{};K.supportsTouch="ontouchstart"in e||p.default.func(e.DocumentTouch)&&I.default.document instanceof e.DocumentTouch,K.supportsPointerEvent=o.pointerEnabled!==!1&&!!I.default.PointerEvent,K.isIOS=/iP(hone|od|ad)/.test(o.platform),K.isIOS7=/iP(hone|od|ad)/.test(o.platform)&&/OS 7[^\d]/.test(o.appVersion),K.isIe9=/MSIE 9/.test(o.userAgent),K.isOperaMobile=o.appName==="Opera"&&K.supportsTouch&&/Presto/.test(o.userAgent),K.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",K.pEventTypes=K.supportsPointerEvent?I.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,K.wheelEvent=I.default.document&&"onmousewheel"in I.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Zt=K;Q.default=Zt;var D={};function lt(e){var t=e.parentNode;if(p.default.docFrag(t)){for(;(t=t.host)&&p.default.docFrag(t););return t}return t}function ct(e,t){return s.window!==s.realWindow&&(t=t.replace(/\/deep\//g," ")),e[Q.default.prefixedMatchesSelector](t)}Object.defineProperty(D,"__esModule",{value:!0}),D.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},D.closest=function(e,t){for(;p.default.element(e);){if(ct(e,t))return e;e=lt(e)}return null},D.parentNode=lt,D.matchesSelector=ct,D.indexOfDeepestElement=function(e){for(var t,o=[],n=0;n<e.length;n++){var i=e[n],r=e[t];if(i&&n!==t)if(r){var c=Kt(i),a=Kt(r);if(c!==i.ownerDocument)if(a!==i.ownerDocument)if(c!==a){o=o.length?o:Nn(r);var l=void 0;if(r instanceof I.default.HTMLElement&&i instanceof I.default.SVGElement&&!(i instanceof I.default.SVGSVGElement)){if(i===a)continue;l=i.ownerSVGElement}else l=i;for(var d=Nn(l,r.ownerDocument),f=0;d[f]&&d[f]===o[f];)f++;var v=[d[f-1],d[f],o[f]];if(v[0])for(var b=v[0].lastChild;b;){if(b===v[1]){t=n,o=d;break}if(b===v[2])break;b=b.previousSibling}}else w=i,y=r,(parseInt(s.getWindow(w).getComputedStyle(w).zIndex,10)||0)>=(parseInt(s.getWindow(y).getComputedStyle(y).zIndex,10)||0)&&(t=n);else t=n}else t=n}var w,y;return t},D.matchesUpTo=function(e,t,o){for(;p.default.element(e);){if(ct(e,t))return!0;if((e=lt(e))===o)return ct(e,t)}return!1},D.getActualElement=function(e){return e.correspondingUseElement||e},D.getScrollXY=Xn,D.getElementClientRect=Yn,D.getElementRect=function(e){var t=Yn(e);if(!Q.default.isIOS7&&t){var o=Xn(s.getWindow(e));t.left+=o.x,t.right+=o.x,t.top+=o.y,t.bottom+=o.y}return t},D.getPath=function(e){for(var t=[];e;)t.push(e),e=lt(e);return t},D.trySelector=function(e){return!!p.default.string(e)&&(I.default.document.querySelector(e),!0)};var Kt=function(e){return e.parentNode||e.host};function Nn(e,t){for(var o,n=[],i=e;(o=Kt(i))&&i!==t&&o!==i.ownerDocument;)n.unshift(i),i=o;return n}function Xn(e){return{x:(e=e||s.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function Yn(e){var t=e instanceof I.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.default=function(e,t){for(var o in t)e[o]=t[o];return e};var $={};function Qt(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function qn(e,t,o){return e==="parent"?(0,D.parentNode)(o):e==="self"?t.getRect(o):(0,D.closest)(o,e)}Object.defineProperty($,"__esModule",{value:!0}),$.getStringOptionResult=qn,$.resolveRectLike=function(e,t,o,n){var i,r=e;return p.default.string(r)?r=qn(r,t,o):p.default.func(r)&&(r=r.apply(void 0,function(c){if(Array.isArray(c))return Qt(c)}(i=n)||function(c){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(c))return Array.from(c)}(i)||function(c,a){if(c){if(typeof c=="string")return Qt(c,a);var l=Object.prototype.toString.call(c).slice(8,-1);return l==="Object"&&c.constructor&&(l=c.constructor.name),l==="Map"||l==="Set"?Array.from(c):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Qt(c,a):void 0}}(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),p.default.element(r)&&(r=(0,D.getElementRect)(r)),r},$.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},$.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,A.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},$.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,A.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},$.addEdges=function(e,t,o){e.left&&(t.left+=o.x),e.right&&(t.right+=o.x),e.top&&(t.top+=o.y),e.bottom&&(t.bottom+=o.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=function(e,t,o){var n=e.options[o],i=n&&n.origin||e.options.origin,r=(0,$.resolveRectLike)(i,e,t,[e&&t]);return(0,$.rectToXY)(r)||{x:0,y:0}};var Ae={};function Un(e){return e.trim().split(/ +/)}Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=function e(t,o,n){if(n=n||{},p.default.string(t)&&t.search(" ")!==-1&&(t=Un(t)),p.default.array(t))return t.reduce(function(l,d){return(0,A.default)(l,e(d,o,n))},n);if(p.default.object(t)&&(o=t,t=""),p.default.func(o))n[t]=n[t]||[],n[t].push(o);else if(p.default.array(o))for(var i=0;i<o.length;i++){var r;r=o[i],e(t,r,n)}else if(p.default.object(o))for(var c in o){var a=Un(c).map(function(l){return"".concat(t).concat(l)});e(a,o[c],n)}return n};var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0,me.default=function(e,t){return Math.sqrt(e*e+t*t)};var qe={};function Jt(e,t){for(var o in t){var n=Jt.prefixedPropREs,i=!1;for(var r in n)if(o.indexOf(r)===0&&n[r].test(o)){i=!0;break}i||typeof t[o]=="function"||(e[o]=t[o])}return e}Object.defineProperty(qe,"__esModule",{value:!0}),qe.default=void 0,Jt.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var Ri=Jt;qe.default=Ri;var C={};function en(e){return e instanceof I.default.Event||e instanceof I.default.Touch}function Ue(e,t,o){return e=e||"page",(o=o||{}).x=t[e+"X"],o.y=t[e+"Y"],o}function $n(e,t){return t=t||{x:0,y:0},Q.default.isOperaMobile&&en(e)?(Ue("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):Ue("page",e,t),t}function Gn(e,t){return t=t||{},Q.default.isOperaMobile&&en(e)?Ue("screen",e,t):Ue("client",e,t),t}function ut(e){var t=[];return p.default.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function Zn(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},o=0;o<e.length;o++){var n=e[o];for(var i in t)t[i]+=n[i]}for(var r in t)t[r]/=e.length;return t}Object.defineProperty(C,"__esModule",{value:!0}),C.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},C.setCoordDeltas=function(e,t,o){e.page.x=o.page.x-t.page.x,e.page.y=o.page.y-t.page.y,e.client.x=o.client.x-t.client.x,e.client.y=o.client.y-t.client.y,e.timeStamp=o.timeStamp-t.timeStamp},C.setCoordVelocity=function(e,t){var o=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/o,e.page.y=t.page.y/o,e.client.x=t.client.x/o,e.client.y=t.client.y/o,e.timeStamp=o},C.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},C.isNativePointer=en,C.getXY=Ue,C.getPageXY=$n,C.getClientXY=Gn,C.getPointerId=function(e){return p.default.number(e.pointerId)?e.pointerId:e.identifier},C.setCoords=function(e,t,o){var n=t.length>1?Zn(t):t[0];$n(n,e.page),Gn(n,e.client),e.timeStamp=o},C.getTouchPair=ut,C.pointerAverage=Zn,C.touchBBox=function(e){if(!e.length)return null;var t=ut(e),o=Math.min(t[0].pageX,t[1].pageX),n=Math.min(t[0].pageY,t[1].pageY),i=Math.max(t[0].pageX,t[1].pageX),r=Math.max(t[0].pageY,t[1].pageY);return{x:o,y:n,left:o,top:n,right:i,bottom:r,width:i-o,height:r-n}},C.touchDistance=function(e,t){var o=t+"X",n=t+"Y",i=ut(e),r=i[0][o]-i[1][o],c=i[0][n]-i[1][n];return(0,me.default)(r,c)},C.touchAngle=function(e,t){var o=t+"X",n=t+"Y",i=ut(e),r=i[1][o]-i[0][o],c=i[1][n]-i[0][n];return 180*Math.atan2(c,r)/Math.PI},C.getPointerType=function(e){return p.default.string(e.pointerType)?e.pointerType:p.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof I.default.Touch?"touch":"mouse"},C.getEventTargets=function(e){var t=p.default.func(e.composedPath)?e.composedPath():e.path;return[D.getActualElement(t?t[0]:e.target),D.getActualElement(e.currentTarget)]},C.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},C.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(C,"pointerExtend",{enumerable:!0,get:function(){return qe.default}});var De={};function zi(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(De,"__esModule",{value:!0}),De.BaseEvent=void 0;var Kn=function(){function e(n){(function(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),this.type=void 0,this.target=void 0,this.currentTarget=void 0,this.interactable=void 0,this._interaction=void 0,this.timeStamp=void 0,this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=n}var t,o;return t=e,(o=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&zi(t.prototype,o),e}();De.BaseEvent=Kn,Object.defineProperty(Kn.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.find=Y.findIndex=Y.from=Y.merge=Y.remove=Y.contains=void 0,Y.contains=function(e,t){return e.indexOf(t)!==-1},Y.remove=function(e,t){return e.splice(e.indexOf(t),1)};var Qn=function(e,t){for(var o=0;o<t.length;o++){var n=t[o];e.push(n)}return e};Y.merge=Qn,Y.from=function(e){return Qn([],e)};var Jn=function(e,t){for(var o=0;o<e.length;o++)if(t(e[o],o,e))return o;return-1};Y.findIndex=Jn,Y.find=function(e,t){return e[Jn(e,t)]};var pe={};function eo(e){return(eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Fi(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function to(e,t){return(to=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o})(e,t)}function Wi(e,t){return!t||eo(t)!=="object"&&typeof t!="function"?function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(pe,"__esModule",{value:!0}),pe.DropEvent=void 0;var Vi=function(e){(function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),l&&to(a,l)})(c,e);var t,o,n,i,r=(n=c,i=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,l=tn(n);if(i){var d=tn(this).constructor;a=Reflect.construct(l,arguments,d)}else a=l.apply(this,arguments);return Wi(this,a)});function c(a,l,d){var f;(function(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")})(this,c),(f=r.call(this,l._interaction)).target=void 0,f.dropzone=void 0,f.dragEvent=void 0,f.relatedTarget=void 0,f.draggable=void 0,f.timeStamp=void 0,f.propagationStopped=!1,f.immediatePropagationStopped=!1;var v=d==="dragleave"?a.prev:a.cur,b=v.element,w=v.dropzone;return f.type=d,f.target=b,f.currentTarget=b,f.dropzone=w,f.dragEvent=l,f.relatedTarget=l.target,f.draggable=l.interactable,f.timeStamp=l.timeStamp,f}return t=c,(o=[{key:"reject",value:function(){var a=this,l=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&l.cur.dropzone===this.dropzone&&l.cur.element===this.target)if(l.prev.dropzone=this.dropzone,l.prev.element=this.target,l.rejected=!0,l.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var d=l.activeDrops,f=Y.findIndex(d,function(b){var w=b.dropzone,y=b.element;return w===a.dropzone&&y===a.target});l.activeDrops.splice(f,1);var v=new c(l,this.dragEvent,"dropdeactivate");v.dropzone=this.dropzone,v.target=this.target,this.dropzone.fire(v)}else this.dropzone.fire(new c(l,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&Fi(t.prototype,o),c}(De.BaseEvent);pe.DropEvent=Vi;var dt={};function no(e,t){for(var o=0;o<e.slice().length;o++){var n=e.slice()[o],i=n.dropzone,r=n.element;t.dropzone=i,t.target=r,i.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function nn(e,t){for(var o=function(r,c){for(var a=r.interactables,l=[],d=0;d<a.list.length;d++){var f=a.list[d];if(f.options.drop.enabled){var v=f.options.drop.accept;if(!(p.default.element(v)&&v!==c||p.default.string(v)&&!D.matchesSelector(c,v)||p.default.func(v)&&!v({dropzone:f,draggableElement:c})))for(var b=p.default.string(f.target)?f._context.querySelectorAll(f.target):p.default.array(f.target)?f.target:[f.target],w=0;w<b.length;w++){var y=b[w];y!==c&&l.push({dropzone:f,element:y,rect:f.getRect(y)})}}}return l}(e,t),n=0;n<o.length;n++){var i=o[n];i.rect=i.dropzone.getRect(i.element)}return o}function oo(e,t,o){for(var n=e.dropState,i=e.interactable,r=e.element,c=[],a=0;a<n.activeDrops.length;a++){var l=n.activeDrops[a],d=l.dropzone,f=l.element,v=l.rect;c.push(d.dropCheck(t,o,i,r,f,v)?f:null)}var b=D.indexOfDeepestElement(c);return n.activeDrops[b]||null}function on(e,t,o){var n=e.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return o.type==="dragstart"&&(i.activate=new pe.DropEvent(n,o,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),o.type==="dragend"&&(i.deactivate=new pe.DropEvent(n,o,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),n.rejected||(n.cur.element!==n.prev.element&&(n.prev.dropzone&&(i.leave=new pe.DropEvent(n,o,"dragleave"),o.dragLeave=i.leave.target=n.prev.element,o.prevDropzone=i.leave.dropzone=n.prev.dropzone),n.cur.dropzone&&(i.enter=new pe.DropEvent(n,o,"dragenter"),o.dragEnter=n.cur.element,o.dropzone=n.cur.dropzone)),o.type==="dragend"&&n.cur.dropzone&&(i.drop=new pe.DropEvent(n,o,"drop"),o.dropzone=n.cur.dropzone,o.relatedTarget=n.cur.element),o.type==="dragmove"&&n.cur.dropzone&&(i.move=new pe.DropEvent(n,o,"dropmove"),i.move.dragmove=o,o.dropzone=n.cur.dropzone)),i}function rn(e,t){var o=e.dropState,n=o.activeDrops,i=o.cur,r=o.prev;t.leave&&r.dropzone.fire(t.leave),t.enter&&i.dropzone.fire(t.enter),t.move&&i.dropzone.fire(t.move),t.drop&&i.dropzone.fire(t.drop),t.deactivate&&no(n,t.deactivate),o.prev.dropzone=i.dropzone,o.prev.element=i.element}function io(e,t){var o=e.interaction,n=e.iEvent,i=e.event;if(n.type==="dragmove"||n.type==="dragend"){var r=o.dropState;t.dynamicDrop&&(r.activeDrops=nn(t,o.element));var c=n,a=oo(o,c,i);r.rejected=r.rejected&&!!a&&a.dropzone===r.cur.dropzone&&a.element===r.cur.element,r.cur.dropzone=a&&a.dropzone,r.cur.element=a&&a.element,r.events=on(o,0,c)}}Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=void 0;var ro={id:"actions/drop",install:function(e){var t=e.actions,o=e.interactStatic,n=e.Interactable,i=e.defaults;e.usePlugin(U.default),n.prototype.dropzone=function(r){return function(c,a){if(p.default.object(a)){if(c.options.drop.enabled=a.enabled!==!1,a.listeners){var l=(0,Ae.default)(a.listeners),d=Object.keys(l).reduce(function(f,v){return f[/^(enter|leave)/.test(v)?"drag".concat(v):/^(activate|deactivate|move)/.test(v)?"drop".concat(v):v]=l[v],f},{});c.off(c.options.drop.listeners),c.on(d),c.options.drop.listeners=d}return p.default.func(a.ondrop)&&c.on("drop",a.ondrop),p.default.func(a.ondropactivate)&&c.on("dropactivate",a.ondropactivate),p.default.func(a.ondropdeactivate)&&c.on("dropdeactivate",a.ondropdeactivate),p.default.func(a.ondragenter)&&c.on("dragenter",a.ondragenter),p.default.func(a.ondragleave)&&c.on("dragleave",a.ondragleave),p.default.func(a.ondropmove)&&c.on("dropmove",a.ondropmove),/^(pointer|center)$/.test(a.overlap)?c.options.drop.overlap=a.overlap:p.default.number(a.overlap)&&(c.options.drop.overlap=Math.max(Math.min(1,a.overlap),0)),"accept"in a&&(c.options.drop.accept=a.accept),"checker"in a&&(c.options.drop.checker=a.checker),c}return p.default.bool(a)?(c.options.drop.enabled=a,c):c.options.drop}(this,r)},n.prototype.dropCheck=function(r,c,a,l,d,f){return function(v,b,w,y,x,T,E){var _=!1;if(!(E=E||v.getRect(T)))return!!v.options.drop.checker&&v.options.drop.checker(b,w,_,v,T,y,x);var L=v.options.drop.overlap;if(L==="pointer"){var R=(0,xe.default)(y,x,"drag"),V=C.getPageXY(b);V.x+=R.x,V.y+=R.y;var G=V.x>E.left&&V.x<E.right,F=V.y>E.top&&V.y<E.bottom;_=G&&F}var X=y.getRect(x);if(X&&L==="center"){var le=X.left+X.width/2,ge=X.top+X.height/2;_=le>=E.left&&le<=E.right&&ge>=E.top&&ge<=E.bottom}return X&&p.default.number(L)&&(_=Math.max(0,Math.min(E.right,X.right)-Math.max(E.left,X.left))*Math.max(0,Math.min(E.bottom,X.bottom)-Math.max(E.top,X.top))/(X.width*X.height)>=L),v.options.drop.checker&&(_=v.options.drop.checker(b,w,_,v,T,y,x)),_}(this,r,c,a,l,d,f)},o.dynamicDrop=function(r){return p.default.bool(r)?(e.dynamicDrop=r,o):e.dynamicDrop},(0,A.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,i.actions.drop=ro.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var o=e.interaction,n=(e.event,e.iEvent);if(o.prepared.name==="drag"){var i=o.dropState;i.activeDrops=null,i.events=null,i.activeDrops=nn(t,o.element),i.events=on(o,0,n),i.events.activate&&(no(i.activeDrops,i.events.activate),t.fire("actions/drop:start",{interaction:o,dragEvent:n}))}},"interactions:action-move":io,"interactions:after-action-move":function(e,t){var o=e.interaction,n=e.iEvent;o.prepared.name==="drag"&&(rn(o,o.dropState.events),t.fire("actions/drop:move",{interaction:o,dragEvent:n}),o.dropState.events={})},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var o=e.interaction,n=e.iEvent;io(e,t),rn(o,o.dropState.events),t.fire("actions/drop:end",{interaction:o,dragEvent:n})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var o=t.dropState;o&&(o.activeDrops=null,o.events=null,o.cur.dropzone=null,o.cur.element=null,o.prev.dropzone=null,o.prev.element=null,o.rejected=!1)}}},getActiveDrops:nn,getDrop:oo,getDropEvents:on,fireDropEvents:rn,defaults:{enabled:!1,accept:null,overlap:"pointer"}},Bi=ro;dt.default=Bi;var pt={};function an(e){var t=e.interaction,o=e.iEvent,n=e.phase;if(t.prepared.name==="gesture"){var i=t.pointers.map(function(d){return d.pointer}),r=n==="start",c=n==="end",a=t.interactable.options.deltaSource;if(o.touches=[i[0],i[1]],r)o.distance=C.touchDistance(i,a),o.box=C.touchBBox(i),o.scale=1,o.ds=0,o.angle=C.touchAngle(i,a),o.da=0,t.gesture.startDistance=o.distance,t.gesture.startAngle=o.angle;else if(c){var l=t.prevEvent;o.distance=l.distance,o.box=l.box,o.scale=l.scale,o.ds=0,o.angle=l.angle,o.da=0}else o.distance=C.touchDistance(i,a),o.box=C.touchBBox(i),o.scale=o.distance/t.gesture.startDistance,o.angle=C.touchAngle(i,a),o.ds=o.scale-t.gesture.scale,o.da=o.angle-t.gesture.angle;t.gesture.distance=o.distance,t.gesture.angle=o.angle,p.default.number(o.scale)&&o.scale!==1/0&&!isNaN(o.scale)&&(t.gesture.scale=o.scale)}}Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0;var sn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,o=e.Interactable,n=e.defaults;o.prototype.gesturable=function(i){return p.default.object(i)?(this.options.gesture.enabled=i.enabled!==!1,this.setPerAction("gesture",i),this.setOnEvents("gesture",i),this):p.default.bool(i)?(this.options.gesture.enabled=i,this):this.options.gesture},t.map.gesture=sn,t.methodDict.gesture="gesturable",n.actions.gesture=sn.defaults},listeners:{"interactions:action-start":an,"interactions:action-move":an,"interactions:action-end":an,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},Ni=sn;pt.default=Ni;var ft={};function Xi(e,t,o,n,i,r,c){if(!t)return!1;if(t===!0){var a=p.default.number(r.width)?r.width:r.right-r.left,l=p.default.number(r.height)?r.height:r.bottom-r.top;if(c=Math.min(c,Math.abs((e==="left"||e==="right"?a:l)/2)),a<0&&(e==="left"?e="right":e==="right"&&(e="left")),l<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left")return o.x<(a>=0?r.left:r.right)+c;if(e==="top")return o.y<(l>=0?r.top:r.bottom)+c;if(e==="right")return o.x>(a>=0?r.right:r.left)-c;if(e==="bottom")return o.y>(l>=0?r.bottom:r.top)-c}return!!p.default.element(n)&&(p.default.element(t)?t===n:D.matchesUpTo(n,t,i))}function ao(e){var t=e.iEvent,o=e.interaction;if(o.prepared.name==="resize"&&o.resizeAxes){var n=t;o.interactable.options.resize.square?(o.resizeAxes==="y"?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=o.resizeAxes,o.resizeAxes==="x"?n.delta.y=0:o.resizeAxes==="y"&&(n.delta.x=0))}}Object.defineProperty(ft,"__esModule",{value:!0}),ft.default=void 0;var fe={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,o=e.browser,n=e.Interactable,i=e.defaults;fe.cursors=function(r){return r.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(o),fe.defaultMargin=o.supportsTouch||o.supportsPointerEvent?20:10,n.prototype.resizable=function(r){return function(c,a,l){return p.default.object(a)?(c.options.resize.enabled=a.enabled!==!1,c.setPerAction("resize",a),c.setOnEvents("resize",a),p.default.string(a.axis)&&/^x$|^y$|^xy$/.test(a.axis)?c.options.resize.axis=a.axis:a.axis===null&&(c.options.resize.axis=l.defaults.actions.resize.axis),p.default.bool(a.preserveAspectRatio)?c.options.resize.preserveAspectRatio=a.preserveAspectRatio:p.default.bool(a.square)&&(c.options.resize.square=a.square),c):p.default.bool(a)?(c.options.resize.enabled=a,c):c.options.resize}(this,r,e)},t.map.resize=fe,t.methodDict.resize="resizable",i.actions.resize=fe.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var o=t.iEvent,n=t.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var i=o,r=n.rect;n._rects={start:(0,A.default)({},r),corrected:(0,A.default)({},r),previous:(0,A.default)({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}})(e),ao(e)},"interactions:action-move":function(e){(function(t){var o=t.iEvent,n=t.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var i=o,r=n.interactable.options.resize.invert,c=r==="reposition"||r==="negate",a=n.rect,l=n._rects,d=l.start,f=l.corrected,v=l.delta,b=l.previous;if((0,A.default)(b,f),c){if((0,A.default)(f,a),r==="reposition"){if(f.top>f.bottom){var w=f.top;f.top=f.bottom,f.bottom=w}if(f.left>f.right){var y=f.left;f.left=f.right,f.right=y}}}else f.top=Math.min(a.top,d.bottom),f.bottom=Math.max(a.bottom,d.top),f.left=Math.min(a.left,d.right),f.right=Math.max(a.right,d.left);for(var x in f.width=f.right-f.left,f.height=f.bottom-f.top,f)v[x]=f[x]-b[x];i.edges=n.prepared.edges,i.rect=f,i.deltaRect=v}})(e),ao(e)},"interactions:action-end":function(e){var t=e.iEvent,o=e.interaction;if(o.prepared.name==="resize"&&o.prepared.edges){var n=t;n.edges=o.prepared.edges,n.rect=o._rects.corrected,n.deltaRect=o._rects.delta}},"auto-start:check":function(e){var t=e.interaction,o=e.interactable,n=e.element,i=e.rect,r=e.buttons;if(i){var c=(0,A.default)({},t.coords.cur.page),a=o.options.resize;if(a&&a.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(r&a.mouseButtons)!=0)){if(p.default.object(a.edges)){var l={left:!1,right:!1,top:!1,bottom:!1};for(var d in l)l[d]=Xi(d,a.edges[d],c,t._latestPointer.eventTarget,n,i,a.margin||fe.defaultMargin);l.left=l.left&&!l.right,l.top=l.top&&!l.bottom,(l.left||l.right||l.top||l.bottom)&&(e.action={name:"resize",edges:l})}else{var f=a.axis!=="y"&&c.x>i.right-fe.defaultMargin,v=a.axis!=="x"&&c.y>i.bottom-fe.defaultMargin;(f||v)&&(e.action={name:"resize",axes:(f?"x":"")+(v?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,o=e.axis,n=e.name,i=fe.cursors,r=null;if(o)r=i[n+o];else if(t){for(var c="",a=["top","bottom","left","right"],l=0;l<a.length;l++){var d=a[l];t[d]&&(c+=d)}r=i[c]}return r},defaultMargin:null},Yi=fe;ft.default=Yi;var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.default=void 0;var qi={id:"actions",install:function(e){e.usePlugin(pt.default),e.usePlugin(ft.default),e.usePlugin(U.default),e.usePlugin(dt.default)}};ht.default=qi;var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=void 0;var he,Se,so=0,Ui={request:function(e){return he(e)},cancel:function(e){return Se(e)},init:function(e){if(he=e.requestAnimationFrame,Se=e.cancelAnimationFrame,!he)for(var t=["ms","moz","webkit","o"],o=0;o<t.length;o++){var n=t[o];he=e["".concat(n,"RequestAnimationFrame")],Se=e["".concat(n,"CancelAnimationFrame")]||e["".concat(n,"CancelRequestAnimationFrame")]}he=he&&he.bind(e),Se=Se&&Se.bind(e),he||(he=function(i){var r=Date.now(),c=Math.max(0,16-(r-so)),a=e.setTimeout(function(){i(r+c)},c);return so=r+c,a},Se=function(i){return clearTimeout(i)})}};ce.default=Ui;var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.getContainer=vt,ye.getScroll=$e,ye.getScrollSize=function(e){return p.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},ye.getScrollSizeDelta=function(e,t){var o=e.interaction,n=e.element,i=o&&o.interactable.options[o.prepared.name].autoScroll;if(!i||!i.enabled)return t(),{x:0,y:0};var r=vt(i.container,o.interactable,n),c=$e(r);t();var a=$e(r);return{x:a.x-c.x,y:a.y-c.y}},ye.default=void 0;var j={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){j.isScrolling=!0,ce.default.cancel(j.i),e.autoScroll=j,j.interaction=e,j.prevTime=j.now(),j.i=ce.default.request(j.scroll)},stop:function(){j.isScrolling=!1,j.interaction&&(j.interaction.autoScroll=null),ce.default.cancel(j.i)},scroll:function(){var e=j.interaction,t=e.interactable,o=e.element,n=e.prepared.name,i=t.options[n].autoScroll,r=vt(i.container,t,o),c=j.now(),a=(c-j.prevTime)/1e3,l=i.speed*a;if(l>=1){var d={x:j.x*l,y:j.y*l};if(d.x||d.y){var f=$e(r);p.default.window(r)?r.scrollBy(d.x,d.y):r&&(r.scrollLeft+=d.x,r.scrollTop+=d.y);var v=$e(r),b={x:v.x-f.x,y:v.y-f.y};(b.x||b.y)&&t.fire({type:"autoscroll",target:o,interactable:t,delta:b,interaction:e,container:r})}j.prevTime=c}j.isScrolling&&(ce.default.cancel(j.i),j.i=ce.default.request(j.scroll))},check:function(e,t){var o;return(o=e.options[t].autoScroll)==null?void 0:o.enabled},onInteractionMove:function(e){var t=e.interaction,o=e.pointer;if(t.interacting()&&j.check(t.interactable,t.prepared.name))if(t.simulation)j.x=j.y=0;else{var n,i,r,c,a=t.interactable,l=t.element,d=t.prepared.name,f=a.options[d].autoScroll,v=vt(f.container,a,l);if(p.default.window(v))c=o.clientX<j.margin,n=o.clientY<j.margin,i=o.clientX>v.innerWidth-j.margin,r=o.clientY>v.innerHeight-j.margin;else{var b=D.getElementClientRect(v);c=o.clientX<b.left+j.margin,n=o.clientY<b.top+j.margin,i=o.clientX>b.right-j.margin,r=o.clientY>b.bottom-j.margin}j.x=i?1:c?-1:0,j.y=r?1:n?-1:0,j.isScrolling||(j.margin=f.margin,j.speed=f.speed,j.start(t))}}};function vt(e,t,o){return(p.default.string(e)?(0,$.getStringOptionResult)(e,t,o):e)||(0,s.getWindow)(o)}function $e(e){return p.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var $i={id:"auto-scroll",install:function(e){var t=e.defaults,o=e.actions;e.autoScroll=j,j.now=function(){return e.now()},o.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=j.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,j.stop(),j.interaction&&(j.interaction=null)},"interactions:stop":j.stop,"interactions:action-move":function(e){return j.onInteractionMove(e)}}};ye.default=$i;var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.warnOnce=function(e,t){var o=!1;return function(){return o||(s.window.console.warn(t),o=!0),e.apply(this,arguments)}},ae.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},ae.sign=void 0,ae.sign=function(e){return e>=0?1:-1};var gt={};function Gi(e){return p.default.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Zi(e){return p.default.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(gt,"__esModule",{value:!0}),gt.default=void 0;var Ki={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(o,n,i,r){var c=function(a,l,d,f,v){var b=a.getRect(f),w={action:null,interactable:a,interaction:d,element:f,rect:b,buttons:l.buttons||{0:1,1:4,3:8,4:16}[l.button]};return v.fire("auto-start:check",w),w.action}(this,n,i,r,e);return this.options.actionChecker?this.options.actionChecker(o,n,c,this,r,i):c},t.prototype.ignoreFrom=(0,ae.warnOnce)(function(o){return this._backCompatOption("ignoreFrom",o)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,ae.warnOnce)(function(o){return this._backCompatOption("allowFrom",o)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=Zi,t.prototype.styleCursor=Gi}};gt.default=Ki;var Ie={};function lo(e,t,o,n,i){return t.testIgnoreAllow(t.options[e.name],o,n)&&t.options[e.name].enabled&&mt(t,o,e,i)?e:null}function Qi(e,t,o,n,i,r,c){for(var a=0,l=n.length;a<l;a++){var d=n[a],f=i[a],v=d.getAction(t,o,e,f);if(v){var b=lo(v,d,f,r,c);if(b)return{action:b,interactable:d,element:f}}}return{action:null,interactable:null,element:null}}function co(e,t,o,n,i){var r=[],c=[],a=n;function l(f){r.push(f),c.push(a)}for(;p.default.element(a);){r=[],c=[],i.interactables.forEachMatch(a,l);var d=Qi(e,t,o,r,c,n,i);if(d.action&&!d.interactable.options[d.action.name].manualStart)return d;a=D.parentNode(a)}return{action:null,interactable:null,element:null}}function uo(e,t,o){var n=t.action,i=t.interactable,r=t.element;n=n||{name:null},e.interactable=i,e.element=r,(0,ae.copyAction)(e.prepared,n),e.rect=i&&n.name?i.getRect(r):null,fo(e,o),o.fire("autoStart:prepared",{interaction:e})}function mt(e,t,o,n){var i=e.options,r=i[o.name].max,c=i[o.name].maxPerElement,a=n.autoStart.maxInteractions,l=0,d=0,f=0;if(!(r&&c&&a))return!1;for(var v=0;v<n.interactions.list.length;v++){var b=n.interactions.list[v],w=b.prepared.name;if(b.interacting()&&(++l>=a||b.interactable===e&&((d+=w===o.name?1:0)>=r||b.element===t&&(f++,w===o.name&&f>=c))))return!1}return a>0}function po(e,t){return p.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function ln(e,t,o){var n=o.autoStart.cursorElement;n&&n!==e&&(n.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,o.autoStart.cursorElement=t?e:null}function fo(e,t){var o=e.interactable,n=e.element,i=e.prepared;if(e.pointerType==="mouse"&&o&&o.options.styleCursor){var r="";if(i.name){var c=o.options[i.name].cursorChecker;r=p.default.func(c)?c(i,o,n,e._interacting):t.actions.map[i.name].getCursor(i)}ln(e.element,r||"",t)}else t.autoStart.cursorElement&&ln(t.autoStart.cursorElement,"",t)}Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;var Ji={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,o=e.defaults;e.usePlugin(gt.default),o.base.actionChecker=null,o.base.styleCursor=!0,(0,A.default)(o.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(n){return po(n,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:mt,cursorElement:null}},listeners:{"interactions:down":function(e,t){var o=e.interaction,n=e.pointer,i=e.event,r=e.eventTarget;o.interacting()||uo(o,co(o,n,i,r,t),t)},"interactions:move":function(e,t){(function(o,n){var i=o.interaction,r=o.pointer,c=o.event,a=o.eventTarget;i.pointerType!=="mouse"||i.pointerIsDown||i.interacting()||uo(i,co(i,r,c,a,n),n)})(e,t),function(o,n){var i=o.interaction;if(i.pointerIsDown&&!i.interacting()&&i.pointerWasMoved&&i.prepared.name){n.fire("autoStart:before-start",o);var r=i.interactable,c=i.prepared.name;c&&r&&(r.options[c].manualStart||!mt(r,i.element,i.prepared,n)?i.stop():(i.start(i.prepared,r,i.element),fo(i,n)))}}(e,t)},"interactions:stop":function(e,t){var o=e.interaction,n=o.interactable;n&&n.options.styleCursor&&ln(o.element,"",t)}},maxInteractions:po,withinInteractionLimit:mt,validateAction:lo};Ie.default=Ji;var yt={};Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0;var er={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var o=e.interaction,n=e.eventTarget,i=e.dx,r=e.dy;if(o.prepared.name==="drag"){var c=Math.abs(i),a=Math.abs(r),l=o.interactable.options.drag,d=l.startAxis,f=c>a?"x":c<a?"y":"xy";if(o.prepared.axis=l.lockAxis==="start"?f[0]:l.lockAxis,f!=="xy"&&d!=="xy"&&d!==f){o.prepared.name=null;for(var v=n,b=function(y){if(y!==o.interactable){var x=o.interactable.options.drag;if(!x.manualStart&&y.testIgnoreAllow(x,v,n)){var T=y.getAction(o.downPointer,o.downEvent,o,v);if(T&&T.name==="drag"&&function(E,_){if(!_)return!1;var L=_.options.drag.startAxis;return E==="xy"||L==="xy"||L===E}(f,y)&&Ie.default.validateAction(T,y,v,n,t))return y}}};p.default.element(v);){var w=t.interactables.forEachMatch(v,b);if(w){o.prepared.name="drag",o.interactable=w,o.element=v;break}v=(0,D.parentNode)(v)}}}}}};yt.default=er;var bt={};function cn(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var o=e.interactable.options;return o[t].hold||o[t].delay}Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=void 0;var tr={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Ie.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,o=cn(t);o>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},o))},"interactions:move":function(e){var t=e.interaction,o=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!o&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;cn(t)>0&&(t.prepared.name=null)}},getHoldDuration:cn};bt.default=tr;var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=void 0;var nr={id:"auto-start",install:function(e){e.usePlugin(Ie.default),e.usePlugin(bt.default),e.usePlugin(yt.default)}};wt.default=nr;var Le={};function or(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):p.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function ir(e){var t=e.interaction,o=e.event;t.interactable&&t.interactable.checkAndPreventDefault(o)}function ho(e){var t=e.Interactable;t.prototype.preventDefault=or,t.prototype.checkAndPreventDefault=function(o){return function(n,i,r){var c=n.options.preventDefault;if(c!=="never")if(c!=="always"){if(i.events.supportsPassive&&/^touch(start|move)$/.test(r.type)){var a=(0,s.getWindow)(r.target).document,l=i.getDocOptions(a);if(!l||!l.events||l.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(r.type)||p.default.element(r.target)&&(0,D.matchesSelector)(r.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||r.preventDefault()}else r.preventDefault()}(this,e,o)},e.interactions.docEvents.push({type:"dragstart",listener:function(o){for(var n=0;n<e.interactions.list.length;n++){var i=e.interactions.list[n];if(i.element&&(i.element===o.target||(0,D.nodeContains)(i.element,o.target)))return void i.interactable.checkAndPreventDefault(o)}}})}Object.defineProperty(Le,"__esModule",{value:!0}),Le.install=ho,Le.default=void 0;var rr={id:"core/interactablePreventDefault",install:ho,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=ir,e},{})};Le.default=rr;var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.default=void 0,Et.default={};var je,xt={};function un(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(je||(je={}));var vo="[interact.js] ",dn={touchAction:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action",boxSizing:"https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing"},pn=[{name:je.touchAction,perform:function(e){return!function(t,o,n){for(var i=t;p.default.element(i);){if(go(i,"touchAction",n))return!0;i=(0,D.parentNode)(i)}return!1}(e.element,0,/pan-|pinch|none/)},getInfo:function(e){return[e.element,dn.touchAction]},text:`Consider adding CSS "touch-action: none" to this element
`},{name:je.boxSizing,perform:function(e){var t=e.element;return e.prepared.name==="resize"&&t instanceof I.default.HTMLElement&&!go(t,"boxSizing",/border-box/)},text:'Consider adding CSS "box-sizing: border-box" to this resizable element',getInfo:function(e){return[e.element,dn.boxSizing]}},{name:je.noListeners,perform:function(e){var t=e.prepared.name;return!(e.interactable.events.types["".concat(t,"move")]||[]).length},getInfo:function(e){return[e.prepared.name,e.interactable]},text:"There are no listeners set for this action"}];function go(e,t,o){var n=e.style[t]||s.window.getComputedStyle(e)[t];return o.test((n||"").toString())}var ar={id:"dev-tools",install:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t.logger,n=e.Interactable,i=e.defaults;e.logger=o||console,i.base.devTools={ignore:{}},n.prototype.devTools=function(r){return r?((0,A.default)(this.options.devTools,r),this):this.options.devTools},e.usePlugin(Et.default)},listeners:{"interactions:action-start":function(e,t){for(var o=e.interaction,n=0;n<pn.length;n++){var i,r=pn[n],c=o.interactable&&o.interactable.options;c&&c.devTools&&c.devTools.ignore[r.name]||!r.perform(o)||(i=t.logger).warn.apply(i,[vo+r.text].concat(function(l){if(Array.isArray(l))return un(l)}(a=r.getInfo(o))||function(l){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(l))return Array.from(l)}(a)||function(l,d){if(l){if(typeof l=="string")return un(l,d);var f=Object.prototype.toString.call(l).slice(8,-1);return f==="Object"&&l.constructor&&(f=l.constructor.name),f==="Map"||f==="Set"?Array.from(l):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?un(l,d):void 0}}(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()))}var a}},checks:pn,CheckName:je,links:dn,prefix:vo};xt.default=ar;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=function e(t){var o={};for(var n in t){var i=t[n];p.default.plainObject(i)?o[n]=e(i):p.default.array(i)?o[n]=Y.from(i):o[n]=i}return o};var Te={};function mo(e,t){return function(o){if(Array.isArray(o))return o}(e)||function(o,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(o)){var i=[],r=!0,c=!1,a=void 0;try{for(var l,d=o[Symbol.iterator]();!(r=(l=d.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(f){c=!0,a=f}finally{try{r||d.return==null||d.return()}finally{if(c)throw a}}return i}}(e,t)||function(o,n){if(o){if(typeof o=="string")return yo(o,n);var i=Object.prototype.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?yo(o,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function yo(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function sr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(Te,"__esModule",{value:!0}),Te.getRectOffset=bo,Te.default=void 0;var lr=function(){function e(n){(function(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=n,this.result=St()}var t,o;return t=e,(o=[{key:"start",value:function(n,i){var r=n.phase,c=this.interaction,a=function(d){var f=d.interactable.options[d.prepared.name],v=f.modifiers;return v&&v.length?v:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(b){var w=f[b];return w&&w.enabled&&{options:w,methods:w._methods}}).filter(function(b){return!!b})}(c);this.prepareStates(a),this.edges=(0,A.default)({},c.edges),this.startOffset=bo(c.rect,i),this.startDelta={x:0,y:0};var l=this.fillArg({phase:r,pageCoords:i,preEnd:!1});return this.result=St(),this.startAll(l),this.result=this.setAll(l)}},{key:"fillArg",value:function(n){var i=this.interaction;return n.interaction=i,n.interactable=i.interactable,n.element=i.element,n.rect=n.rect||i.rect,n.edges=this.edges,n.startOffset=this.startOffset,n}},{key:"startAll",value:function(n){for(var i=0;i<this.states.length;i++){var r=this.states[i];r.methods.start&&(n.state=r,r.methods.start(n))}}},{key:"setAll",value:function(n){var i=n.phase,r=n.preEnd,c=n.skipModifiers,a=n.rect;n.coords=(0,A.default)({},n.pageCoords),n.rect=(0,A.default)({},a);for(var l=c?this.states.slice(c):this.states,d=St(n.coords,n.rect),f=0;f<l.length;f++){var v,b=l[f],w=b.options,y=(0,A.default)({},n.coords),x=null;(v=b.methods)!=null&&v.set&&this.shouldDo(w,r,i)&&(n.state=b,x=b.methods.set(n),$.addEdges(this.interaction.edges,n.rect,{x:n.coords.x-y.x,y:n.coords.y-y.y})),d.eventProps.push(x)}d.delta.x=n.coords.x-n.pageCoords.x,d.delta.y=n.coords.y-n.pageCoords.y,d.rectDelta.left=n.rect.left-a.left,d.rectDelta.right=n.rect.right-a.right,d.rectDelta.top=n.rect.top-a.top,d.rectDelta.bottom=n.rect.bottom-a.bottom;var T=this.result.coords,E=this.result.rect;if(T&&E){var _=d.rect.left!==E.left||d.rect.right!==E.right||d.rect.top!==E.top||d.rect.bottom!==E.bottom;d.changed=_||T.x!==d.coords.x||T.y!==d.coords.y}return d}},{key:"applyToInteraction",value:function(n){var i=this.interaction,r=n.phase,c=i.coords.cur,a=i.coords.start,l=this.result,d=this.startDelta,f=l.delta;r==="start"&&(0,A.default)(this.startDelta,l.delta);for(var v=[[a,d],[c,f]],b=0;b<v.length;b++){var w=mo(v[b],2),y=w[0],x=w[1];y.page.x+=x.x,y.page.y+=x.y,y.client.x+=x.x,y.client.y+=x.y}var T=this.result.rectDelta,E=n.rect||i.rect;E.left+=T.left,E.right+=T.right,E.top+=T.top,E.bottom+=T.bottom,E.width=E.right-E.left,E.height=E.bottom-E.top}},{key:"setAndApply",value:function(n){var i=this.interaction,r=n.phase,c=n.preEnd,a=n.skipModifiers,l=this.setAll(this.fillArg({preEnd:c,phase:r,pageCoords:n.modifiedCoords||i.coords.cur.page}));if(this.result=l,!l.changed&&(!a||a<this.states.length)&&i.interacting())return!1;if(n.modifiedCoords){var d=i.coords.cur.page,f={x:n.modifiedCoords.x-d.x,y:n.modifiedCoords.y-d.y};l.coords.x+=f.x,l.coords.y+=f.y,l.delta.x+=f.x,l.delta.y+=f.y}this.applyToInteraction(n)}},{key:"beforeEnd",value:function(n){var i=n.interaction,r=n.event,c=this.states;if(c&&c.length){for(var a=!1,l=0;l<c.length;l++){var d=c[l];n.state=d;var f=d.options,v=d.methods,b=v.beforeEnd&&v.beforeEnd(n);if(b)return this.endResult=b,!1;a=a||!a&&this.shouldDo(f,!0,n.phase,!0)}a&&i.move({event:r,preEnd:!0})}}},{key:"stop",value:function(n){var i=n.interaction;if(this.states&&this.states.length){var r=(0,A.default)({states:this.states,interactable:i.interactable,element:i.element,rect:null},n);this.fillArg(r);for(var c=0;c<this.states.length;c++){var a=this.states[c];r.state=a,a.methods.stop&&a.methods.stop(r)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(n){this.states=[];for(var i=0;i<n.length;i++){var r=n[i],c=r.options,a=r.methods,l=r.name;this.states.push({options:c,methods:a,index:i,name:l})}return this.states}},{key:"restoreInteractionCoords",value:function(n){var i=n.interaction,r=i.coords,c=i.rect,a=i.modification;if(a.result){for(var l=a.startDelta,d=a.result,f=d.delta,v=d.rectDelta,b=[[r.start,l],[r.cur,f]],w=0;w<b.length;w++){var y=mo(b[w],2),x=y[0],T=y[1];x.page.x-=T.x,x.page.y-=T.y,x.client.x-=T.x,x.client.y-=T.y}c.left-=v.left,c.right-=v.right,c.top-=v.top,c.bottom-=v.bottom}}},{key:"shouldDo",value:function(n,i,r,c){return!(!n||n.enabled===!1||c&&!n.endOnly||n.endOnly&&!i||r==="start"&&!n.setStart)}},{key:"copyFrom",value:function(n){this.startOffset=n.startOffset,this.startDelta=n.startDelta,this.edges=n.edges,this.states=n.states.map(function(i){return(0,Pe.default)(i)}),this.result=St((0,A.default)({},n.result.coords),(0,A.default)({},n.result.rect))}},{key:"destroy",value:function(){for(var n in this)this[n]=null}}])&&sr(t.prototype,o),e}();function St(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function bo(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}Te.default=lr;var J={};function Pt(e){var t=e.iEvent,o=e.interaction.modification.result;o&&(t.modifiers=o.eventProps)}Object.defineProperty(J,"__esModule",{value:!0}),J.makeModifier=function(e,t){var o=e.defaults,n={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},i=function(r){var c=r||{};for(var a in c.enabled=c.enabled!==!1,o)a in c||(c[a]=o[a]);var l={options:c,methods:n,name:t,enable:function(){return c.enabled=!0,l},disable:function(){return c.enabled=!1,l}};return l};return t&&typeof t=="string"&&(i._defaults=o,i._methods=n),i},J.addEventModifiers=Pt,J.default=void 0;var cr={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new Te.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":Pt,"interactions:action-move":Pt,"interactions:action-end":Pt,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};J.default=cr;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.defaults=void 0,Ge.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var Ze={};function wo(e){return(wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ur(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o})(e,t)}function dr(e,t){return!t||wo(t)!=="object"&&typeof t!="function"?xo(e):t}function xo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.InteractEvent=void 0;var So=function(e){(function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),l&&Eo(a,l)})(c,e);var t,o,n,i,r=(n=c,i=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,l=fn(n);if(i){var d=fn(this).constructor;a=Reflect.construct(l,arguments,d)}else a=l.apply(this,arguments);return dr(this,a)});function c(a,l,d,f,v,b,w){var y;(function(G,F){if(!(G instanceof F))throw new TypeError("Cannot call a class as a function")})(this,c),(y=r.call(this,a)).target=void 0,y.currentTarget=void 0,y.relatedTarget=null,y.screenX=void 0,y.screenY=void 0,y.button=void 0,y.buttons=void 0,y.ctrlKey=void 0,y.shiftKey=void 0,y.altKey=void 0,y.metaKey=void 0,y.page=void 0,y.client=void 0,y.delta=void 0,y.rect=void 0,y.x0=void 0,y.y0=void 0,y.t0=void 0,y.dt=void 0,y.duration=void 0,y.clientX0=void 0,y.clientY0=void 0,y.velocity=void 0,y.speed=void 0,y.swipe=void 0,y.timeStamp=void 0,y.axes=void 0,y.preEnd=void 0,v=v||a.element;var x=a.interactable,T=(x&&x.options||Ge.defaults).deltaSource,E=(0,xe.default)(x,v,d),_=f==="start",L=f==="end",R=_?xo(y):a.prevEvent,V=_?a.coords.start:L?{page:R.page,client:R.client,timeStamp:a.coords.cur.timeStamp}:a.coords.cur;return y.page=(0,A.default)({},V.page),y.client=(0,A.default)({},V.client),y.rect=(0,A.default)({},a.rect),y.timeStamp=V.timeStamp,L||(y.page.x-=E.x,y.page.y-=E.y,y.client.x-=E.x,y.client.y-=E.y),y.ctrlKey=l.ctrlKey,y.altKey=l.altKey,y.shiftKey=l.shiftKey,y.metaKey=l.metaKey,y.button=l.button,y.buttons=l.buttons,y.target=v,y.currentTarget=v,y.preEnd=b,y.type=w||d+(f||""),y.interactable=x,y.t0=_?a.pointers[a.pointers.length-1].downTime:R.t0,y.x0=a.coords.start.page.x-E.x,y.y0=a.coords.start.page.y-E.y,y.clientX0=a.coords.start.client.x-E.x,y.clientY0=a.coords.start.client.y-E.y,y.delta=_||L?{x:0,y:0}:{x:y[T].x-R[T].x,y:y[T].y-R[T].y},y.dt=a.coords.delta.timeStamp,y.duration=y.timeStamp-y.t0,y.velocity=(0,A.default)({},a.coords.velocity[T]),y.speed=(0,me.default)(y.velocity.x,y.velocity.y),y.swipe=L||f==="inertiastart"?y.getSwipe():null,y}return t=c,(o=[{key:"getSwipe",value:function(){var a=this._interaction;if(a.prevEvent.speed<600||this.timeStamp-a.prevEvent.timeStamp>150)return null;var l=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI;l<0&&(l+=360);var d=112.5<=l&&l<247.5,f=202.5<=l&&l<337.5;return{up:f,down:!f&&22.5<=l&&l<157.5,left:d,right:!d&&(292.5<=l||l<67.5),angle:l,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&ur(t.prototype,o),c}(De.BaseEvent);Ze.InteractEvent=So,Object.defineProperties(So.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.PointerInfo=void 0,Ke.PointerInfo=function e(t,o,n,i,r){(function(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=t,this.pointer=o,this.event=n,this.downTime=i,this.downTarget=r};var Tt,kt,ie={};function pr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(ie,"__esModule",{value:!0}),Object.defineProperty(ie,"PointerInfo",{enumerable:!0,get:function(){return Ke.PointerInfo}}),ie.default=ie.Interaction=ie._ProxyMethods=ie._ProxyValues=void 0,ie._ProxyValues=Tt,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(Tt||(ie._ProxyValues=Tt={})),ie._ProxyMethods=kt,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(kt||(ie._ProxyMethods=kt={}));var fr=0,Po=function(){function e(n){var i=this,r=n.pointerType,c=n.scopeFire;(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,e),this.interactable=null,this.element=null,this.rect=void 0,this._rects=void 0,this.edges=void 0,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=null,this.simulation=null,this.doMove=(0,ae.warnOnce)(function(b){this.move(b)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:C.newCoords(),prev:C.newCoords(),cur:C.newCoords(),delta:C.newCoords(),velocity:C.newCoords()},this._id=fr++,this._scopeFire=c,this.pointerType=r;var a=this;this._proxy={};var l=function(b){Object.defineProperty(i._proxy,b,{get:function(){return a[b]}})};for(var d in Tt)l(d);var f=function(b){Object.defineProperty(i._proxy,b,{value:function(){return a[b].apply(a,arguments)}})};for(var v in kt)f(v);this._scopeFire("interactions:new",{interaction:this})}var t,o;return t=e,(o=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(n,i,r){var c=this.updatePointer(n,i,r,!0),a=this.pointers[c];this._scopeFire("interactions:down",{pointer:n,event:i,eventTarget:r,pointerIndex:c,pointerInfo:a,type:"down",interaction:this})}},{key:"start",value:function(n,i,r){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(n.name==="gesture"?2:1)||!i.options[n.name].enabled)&&((0,ae.copyAction)(this.prepared,n),this.interactable=i,this.element=r,this.rect=i.getRect(r),this.edges=this.prepared.edges?(0,A.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(n,i,r){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(n,i,r,!1);var c,a,l=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(c=this.coords.cur.client.x-this.coords.start.client.x,a=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,me.default)(c,a)>this.pointerMoveTolerance);var d=this.getPointerIndex(n),f={pointer:n,pointerIndex:d,pointerInfo:this.pointers[d],event:i,type:"move",eventTarget:r,dx:c,dy:a,duplicate:l,interaction:this};l||C.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",f),l||this.simulation||(this.interacting()&&(f.type=null,this.move(f)),this.pointerWasMoved&&C.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(n){n&&n.event||C.setZeroCoords(this.coords.delta),(n=(0,A.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},n||{})).phase="move",this._doPhase(n)}},{key:"pointerUp",value:function(n,i,r,c){var a=this.getPointerIndex(n);a===-1&&(a=this.updatePointer(n,i,r,!1));var l=/cancel$/i.test(i.type)?"cancel":"up";this._scopeFire("interactions:".concat(l),{pointer:n,pointerIndex:a,pointerInfo:this.pointers[a],event:i,eventTarget:r,type:l,curEventTarget:c,interaction:this}),this.simulation||this.end(i),this.removePointer(n,i)}},{key:"documentBlur",value:function(n){this.end(n),this._scopeFire("interactions:blur",{event:n,type:"blur",interaction:this})}},{key:"end",value:function(n){var i;this._ending=!0,n=n||this._latestPointer.event,this.interacting()&&(i=this._doPhase({event:n,interaction:this,phase:"end"})),this._ending=!1,i===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(n){var i=C.getPointerId(n);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Y.findIndex(this.pointers,function(r){return r.id===i})}},{key:"getPointerInfo",value:function(n){return this.pointers[this.getPointerIndex(n)]}},{key:"updatePointer",value:function(n,i,r,c){var a=C.getPointerId(n),l=this.getPointerIndex(n),d=this.pointers[l];return c=c!==!1&&(c||/(down|start)$/i.test(i.type)),d?d.pointer=n:(d=new Ke.PointerInfo(a,n,i,null,null),l=this.pointers.length,this.pointers.push(d)),C.setCoords(this.coords.cur,this.pointers.map(function(f){return f.pointer}),this._now()),C.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),c&&(this.pointerIsDown=!0,d.downTime=this.coords.cur.timeStamp,d.downTarget=r,C.pointerExtend(this.downPointer,n),this.interacting()||(C.copyCoords(this.coords.start,this.coords.cur),C.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=i,this.pointerWasMoved=!1)),this._updateLatestPointer(n,i,r),this._scopeFire("interactions:update-pointer",{pointer:n,event:i,eventTarget:r,down:c,pointerInfo:d,pointerIndex:l,interaction:this}),l}},{key:"removePointer",value:function(n,i){var r=this.getPointerIndex(n);if(r!==-1){var c=this.pointers[r];this._scopeFire("interactions:remove-pointer",{pointer:n,event:i,eventTarget:null,pointerIndex:r,pointerInfo:c,interaction:this}),this.pointers.splice(r,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(n,i,r){this._latestPointer.pointer=n,this._latestPointer.event=i,this._latestPointer.eventTarget=r}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(n,i,r,c){return new Ze.InteractEvent(this,n,this.prepared.name,i,this.element,r,c)}},{key:"_fireEvent",value:function(n){this.interactable.fire(n),(!this.prevEvent||n.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=n)}},{key:"_doPhase",value:function(n){var i=n.event,r=n.phase,c=n.preEnd,a=n.type,l=this.rect;if(l&&r==="move"&&($.addEdges(this.edges,l,this.coords.delta[this.interactable.options.deltaSource]),l.width=l.right-l.left,l.height=l.bottom-l.top),this._scopeFire("interactions:before-action-".concat(r),n)===!1)return!1;var d=n.iEvent=this._createPreparedEvent(i,r,c,a);return this._scopeFire("interactions:action-".concat(r),n),r==="start"&&(this.prevEvent=d),this._fireEvent(d),this._scopeFire("interactions:after-action-".concat(r),n),!0}},{key:"_now",value:function(){return Date.now()}}])&&pr(t.prototype,o),e}();ie.Interaction=Po;var hr=Po;ie.default=hr;var ke={};function To(e){e.pointerIsDown&&(vn(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function ko(e){hn(e.interaction)}function hn(e){if(!function(o){return!(!o.offset.pending.x&&!o.offset.pending.y)}(e))return!1;var t=e.offset.pending;return vn(e.coords.cur,t),vn(e.coords.delta,t),$.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function vr(e){var t=e.x,o=e.y;this.offset.pending.x+=t,this.offset.pending.y+=o,this.offset.total.x+=t,this.offset.total.y+=o}function vn(e,t){var o=e.page,n=e.client,i=t.x,r=t.y;o.x+=i,o.y+=r,n.x+=i,n.y+=r}Object.defineProperty(ke,"__esModule",{value:!0}),ke.addTotal=To,ke.applyPending=hn,ke.default=void 0,ie._ProxyMethods.offsetBy="";var gr={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=vr},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return To(e.interaction)},"interactions:before-action-start":ko,"interactions:before-action-move":ko,"interactions:before-action-end":function(e){var t=e.interaction;if(hn(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};ke.default=gr;var He={};function mr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(He,"__esModule",{value:!0}),He.default=He.InertiaState=void 0;var Mo=function(){function e(n){(function(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=n}var t,o;return t=e,(o=[{key:"start",value:function(n){var i=this.interaction,r=Mt(i);if(!r||!r.enabled)return!1;var c=i.coords.velocity.client,a=(0,me.default)(c.x,c.y),l=this.modification||(this.modification=new Te.default(i));if(l.copyFrom(i.modification),this.t0=i._now(),this.allowResume=r.allowResume,this.v0=a,this.currentOffset={x:0,y:0},this.startCoords=i.coords.cur.page,this.modifierArg=l.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-i.coords.cur.timeStamp<50&&a>r.minSpeed&&a>r.endSpeed)this.startInertia();else{if(l.result=l.setAll(this.modifierArg),!l.result.changed)return!1;this.startSmoothEnd()}return i.modification.result.rect=null,i.offsetBy(this.targetOffset),i._doPhase({interaction:i,event:n,phase:"inertiastart"}),i.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),i.modification.result.rect=null,this.active=!0,i.simulation=this,!0}},{key:"startInertia",value:function(){var n=this,i=this.interaction.coords.velocity.client,r=Mt(this.interaction),c=r.resistance,a=-Math.log(r.endSpeed/this.v0)/c;this.targetOffset={x:(i.x-a)/c,y:(i.y-a)/c},this.te=a,this.lambda_v0=c/this.v0,this.one_ve_v0=1-r.endSpeed/this.v0;var l=this.modification,d=this.modifierArg;d.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},l.result=l.setAll(d),l.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+l.result.delta.x,y:this.targetOffset.y+l.result.delta.y}),this.onNextFrame(function(){return n.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var n=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return n.smoothEndTick()})}},{key:"onNextFrame",value:function(n){var i=this;this.timeout=ce.default.request(function(){i.active&&n()})}},{key:"inertiaTick",value:function(){var n,i,r,c,a,l=this,d=this.interaction,f=Mt(d).resistance,v=(d._now()-this.t0)/1e3;if(v<this.te){var b,w=1-(Math.exp(-f*v)-this.lambda_v0)/this.one_ve_v0;this.isModified?(n=this.targetOffset.x,i=this.targetOffset.y,r=this.modifiedOffset.x,c=this.modifiedOffset.y,b={x:Oo(a=w,0,n,r),y:Oo(a,0,i,c)}):b={x:this.targetOffset.x*w,y:this.targetOffset.y*w};var y={x:b.x-this.currentOffset.x,y:b.y-this.currentOffset.y};this.currentOffset.x+=y.x,this.currentOffset.y+=y.y,d.offsetBy(y),d.move(),this.onNextFrame(function(){return l.inertiaTick()})}else d.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var n=this,i=this.interaction,r=i._now()-this.t0,c=Mt(i).smoothEndDuration;if(r<c){var a={x:_o(r,0,this.targetOffset.x,c),y:_o(r,0,this.targetOffset.y,c)},l={x:a.x-this.currentOffset.x,y:a.y-this.currentOffset.y};this.currentOffset.x+=l.x,this.currentOffset.y+=l.y,i.offsetBy(l),i.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return n.smoothEndTick()})}else i.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(n){var i=n.pointer,r=n.event,c=n.eventTarget,a=this.interaction;a.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),a.updatePointer(i,r,c,!0),a._doPhase({interaction:a,event:r,phase:"resume"}),(0,C.copyCoords)(a.coords.prev,a.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ce.default.cancel(this.timeout)}}])&&mr(t.prototype,o),e}();function Mt(e){var t=e.interactable,o=e.prepared;return t&&t.options&&o.name&&t.options[o.name].inertia}function Oo(e,t,o,n){var i=1-e;return i*i*t+2*i*e*o+e*e*n}function _o(e,t,o,n){return-o*(e/=n)*(e-2)+t}He.InertiaState=Mo;var yr={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(ke.default),e.usePlugin(J.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new Mo(t)},"interactions:before-action-end":function(e){var t=e.interaction,o=e.event;return(!t._interacting||t.simulation||!t.inertia.start(o))&&null},"interactions:down":function(e){var t=e.interaction,o=e.eventTarget,n=t.inertia;if(n.active)for(var i=o;p.default.element(i);){if(i===t.element){n.resume(e);break}i=D.parentNode(i)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":J.addEventModifiers,"interactions:action-inertiastart":J.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};He.default=yr;var Qe={};function br(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Co(e,t){for(var o=0;o<t.length;o++){var n=t[o];if(e.immediatePropagationStopped)break;n(e)}}Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Eventable=void 0;var wr=function(){function e(n){(function(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=(0,A.default)({},n||{})}var t,o;return t=e,(o=[{key:"fire",value:function(n){var i,r=this.global;(i=this.types[n.type])&&Co(n,i),!n.propagationStopped&&r&&(i=r[n.type])&&Co(n,i)}},{key:"on",value:function(n,i){var r=(0,Ae.default)(n,i);for(n in r)this.types[n]=Y.merge(this.types[n]||[],r[n])}},{key:"off",value:function(n,i){var r=(0,Ae.default)(n,i);for(n in r){var c=this.types[n];if(c&&c.length)for(var a=0;a<r[n].length;a++){var l=r[n][a],d=c.indexOf(l);d!==-1&&c.splice(d,1)}}}},{key:"getRect",value:function(n){return null}}])&&br(t.prototype,o),e}();Qe.Eventable=wr;var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var o in t.map)if(e.indexOf(o)===0&&e.substr(o.length)in t.phases)return!0;return!1};var gn={};Object.defineProperty(gn,"__esModule",{value:!0}),gn.createInteractStatic=function(e){var t=function o(n,i){var r=e.interactables.get(n,i);return r||((r=e.interactables.new(n,i)).events.global=o.globalEvents),r};return t.getPointerAverage=C.pointerAverage,t.getTouchBBox=C.touchBBox,t.getTouchDistance=C.touchDistance,t.getTouchAngle=C.touchAngle,t.getElementRect=D.getElementRect,t.getElementClientRect=D.getElementClientRect,t.matchesSelector=D.matchesSelector,t.closest=D.closest,t.globalEvents={},t.version="1.10.11",t.scope=e,t.use=function(o,n){return this.scope.usePlugin(o,n),this},t.isSet=function(o,n){return!!this.scope.interactables.get(o,n&&n.context)},t.on=(0,ae.warnOnce)(function(o,n,i){if(p.default.string(o)&&o.search(" ")!==-1&&(o=o.trim().split(/ +/)),p.default.array(o)){for(var r=0;r<o.length;r++){var c=o[r];this.on(c,n,i)}return this}if(p.default.object(o)){for(var a in o)this.on(a,o[a],n);return this}return(0,Je.default)(o,this.scope.actions)?this.globalEvents[o]?this.globalEvents[o].push(n):this.globalEvents[o]=[n]:this.scope.events.add(this.scope.document,o,n,{options:i}),this},"The interact.on() method is being deprecated"),t.off=(0,ae.warnOnce)(function(o,n,i){if(p.default.string(o)&&o.search(" ")!==-1&&(o=o.trim().split(/ +/)),p.default.array(o)){for(var r=0;r<o.length;r++){var c=o[r];this.off(c,n,i)}return this}if(p.default.object(o)){for(var a in o)this.off(a,o[a],n);return this}var l;return(0,Je.default)(o,this.scope.actions)?o in this.globalEvents&&(l=this.globalEvents[o].indexOf(n))!==-1&&this.globalEvents[o].splice(l,1):this.scope.events.remove(this.scope.document,o,n,i),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return Q.default.supportsTouch},t.supportsPointerEvent=function(){return Q.default.supportsPointerEvent},t.stop=function(){for(var o=0;o<this.scope.interactions.list.length;o++)this.scope.interactions.list[o].stop();return this},t.pointerMoveTolerance=function(o){return p.default.number(o)?(this.scope.interactions.pointerMoveTolerance=o,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(o,n){this.scope.addDocument(o,n)},t.removeDocument=function(o){this.scope.removeDocument(o)},t};var Ot={};function Er(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.Interactable=void 0;var xr=function(){function e(n,i,r,c){(function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=void 0,this._actions=void 0,this.target=void 0,this.events=new Qe.Eventable,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._rectChecker=void 0,this._actions=i.actions,this.target=n,this._context=i.context||r,this._win=(0,s.getWindow)((0,D.trySelector)(n)?this._context:n),this._doc=this._win.document,this._scopeEvents=c,this.set(i)}var t,o;return t=e,(o=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(n,i){return p.default.func(i.onstart)&&this.on("".concat(n,"start"),i.onstart),p.default.func(i.onmove)&&this.on("".concat(n,"move"),i.onmove),p.default.func(i.onend)&&this.on("".concat(n,"end"),i.onend),p.default.func(i.oninertiastart)&&this.on("".concat(n,"inertiastart"),i.oninertiastart),this}},{key:"updatePerActionListeners",value:function(n,i,r){(p.default.array(i)||p.default.object(i))&&this.off(n,i),(p.default.array(r)||p.default.object(r))&&this.on(n,r)}},{key:"setPerAction",value:function(n,i){var r=this._defaults;for(var c in i){var a=c,l=this.options[n],d=i[a];a==="listeners"&&this.updatePerActionListeners(n,l.listeners,d),p.default.array(d)?l[a]=Y.from(d):p.default.plainObject(d)?(l[a]=(0,A.default)(l[a]||{},(0,Pe.default)(d)),p.default.object(r.perAction[a])&&"enabled"in r.perAction[a]&&(l[a].enabled=d.enabled!==!1)):p.default.bool(d)&&p.default.object(r.perAction[a])?l[a].enabled=d:l[a]=d}}},{key:"getRect",value:function(n){return n=n||(p.default.element(this.target)?this.target:null),p.default.string(this.target)&&(n=n||this._context.querySelector(this.target)),(0,D.getElementRect)(n)}},{key:"rectChecker",value:function(n){var i=this;return p.default.func(n)?(this._rectChecker=n,this.getRect=function(r){var c=(0,A.default)({},i._rectChecker(r));return"width"in c||(c.width=c.right-c.left,c.height=c.bottom-c.top),c},this):n===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(n,i){if((0,D.trySelector)(i)||p.default.object(i)){for(var r in this.options[n]=i,this._actions.map)this.options[r][n]=i;return this}return this.options[n]}},{key:"origin",value:function(n){return this._backCompatOption("origin",n)}},{key:"deltaSource",value:function(n){return n==="page"||n==="client"?(this.options.deltaSource=n,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(n){return this._context===n.ownerDocument||(0,D.nodeContains)(this._context,n)}},{key:"testIgnoreAllow",value:function(n,i,r){return!this.testIgnore(n.ignoreFrom,i,r)&&this.testAllow(n.allowFrom,i,r)}},{key:"testAllow",value:function(n,i,r){return!n||!!p.default.element(r)&&(p.default.string(n)?(0,D.matchesUpTo)(r,n,i):!!p.default.element(n)&&(0,D.nodeContains)(n,r))}},{key:"testIgnore",value:function(n,i,r){return!(!n||!p.default.element(r))&&(p.default.string(n)?(0,D.matchesUpTo)(r,n,i):!!p.default.element(n)&&(0,D.nodeContains)(n,r))}},{key:"fire",value:function(n){return this.events.fire(n),this}},{key:"_onOff",value:function(n,i,r,c){p.default.object(i)&&!p.default.array(i)&&(c=r,r=null);var a=n==="on"?"add":"remove",l=(0,Ae.default)(i,r);for(var d in l){d==="wheel"&&(d=Q.default.wheelEvent);for(var f=0;f<l[d].length;f++){var v=l[d][f];(0,Je.default)(d,this._actions)?this.events[n](d,v):p.default.string(this.target)?this._scopeEvents["".concat(a,"Delegate")](this.target,this._context,d,v,c):this._scopeEvents[a](this.target,d,v,c)}}return this}},{key:"on",value:function(n,i,r){return this._onOff("on",n,i,r)}},{key:"off",value:function(n,i,r){return this._onOff("off",n,i,r)}},{key:"set",value:function(n){var i=this._defaults;for(var r in p.default.object(n)||(n={}),this.options=(0,Pe.default)(i.base),this._actions.methodDict){var c=r,a=this._actions.methodDict[c];this.options[c]={},this.setPerAction(c,(0,A.default)((0,A.default)({},i.perAction),i.actions[c])),this[a](n[c])}for(var l in n)p.default.func(this[l])&&this[l](n[l]);return this}},{key:"unset",value:function(){if(p.default.string(this.target))for(var n in this._scopeEvents.delegatedEvents)for(var i=this._scopeEvents.delegatedEvents[n],r=i.length-1;r>=0;r--){var c=i[r],a=c.selector,l=c.context,d=c.listeners;a===this.target&&l===this._context&&i.splice(r,1);for(var f=d.length-1;f>=0;f--)this._scopeEvents.removeDelegate(this.target,this._context,n,d[f][0],d[f][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Er(t.prototype,o),e}();Ot.Interactable=xr;var _t={};function Sr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(_t,"__esModule",{value:!0}),_t.InteractableSet=void 0;var Pr=function(){function e(n){var i=this;(function(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=n,n.addListeners({"interactable:unset":function(r){var c=r.interactable,a=c.target,l=c._context,d=p.default.string(a)?i.selectorMap[a]:a[i.scope.id],f=Y.findIndex(d,function(v){return v.context===l});d[f]&&(d[f].context=null,d[f].interactable=null),d.splice(f,1)}})}var t,o;return t=e,(o=[{key:"new",value:function(n,i){i=(0,A.default)(i||{},{actions:this.scope.actions});var r=new this.scope.Interactable(n,i,this.scope.document,this.scope.events),c={context:r._context,interactable:r};return this.scope.addDocument(r._doc),this.list.push(r),p.default.string(n)?(this.selectorMap[n]||(this.selectorMap[n]=[]),this.selectorMap[n].push(c)):(r.target[this.scope.id]||Object.defineProperty(n,this.scope.id,{value:[],configurable:!0}),n[this.scope.id].push(c)),this.scope.fire("interactable:new",{target:n,options:i,interactable:r,win:this.scope._win}),r}},{key:"get",value:function(n,i){var r=i&&i.context||this.scope.document,c=p.default.string(n),a=c?this.selectorMap[n]:n[this.scope.id];if(!a)return null;var l=Y.find(a,function(d){return d.context===r&&(c||d.interactable.inContext(n))});return l&&l.interactable}},{key:"forEachMatch",value:function(n,i){for(var r=0;r<this.list.length;r++){var c=this.list[r],a=void 0;if((p.default.string(c.target)?p.default.element(n)&&D.matchesSelector(n,c.target):n===c.target)&&c.inContext(n)&&(a=i(c)),a!==void 0)return a}}}])&&Sr(t.prototype,o),e}();_t.InteractableSet=Pr;var Ct={};function Tr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mn(e,t){return function(o){if(Array.isArray(o))return o}(e)||function(o,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(o)){var i=[],r=!0,c=!1,a=void 0;try{for(var l,d=o[Symbol.iterator]();!(r=(l=d.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(f){c=!0,a=f}finally{try{r||d.return==null||d.return()}finally{if(c)throw a}}return i}}(e,t)||function(o,n){if(o){if(typeof o=="string")return Ao(o,n);var i=Object.prototype.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ao(o,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ao(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=void 0;var kr=function(){function e(n){(function(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")})(this,e),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=n,(0,qe.default)(this,n)}var t,o;return t=e,(o=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&Tr(t.prototype,o),e}();function et(e){if(!p.default.object(e))return{capture:!!e,passive:!1};var t=(0,A.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var Mr={id:"events",install:function(e){var t,o=[],n={},i=[],r={add:c,remove:a,addDelegate:function(f,v,b,w,y){var x=et(y);if(!n[b]){n[b]=[];for(var T=0;T<i.length;T++){var E=i[T];c(E,b,l),c(E,b,d,!0)}}var _=n[b],L=Y.find(_,function(R){return R.selector===f&&R.context===v});L||(L={selector:f,context:v,listeners:[]},_.push(L)),L.listeners.push([w,x])},removeDelegate:function(f,v,b,w,y){var x,T=et(y),E=n[b],_=!1;if(E)for(x=E.length-1;x>=0;x--){var L=E[x];if(L.selector===f&&L.context===v){for(var R=L.listeners,V=R.length-1;V>=0;V--){var G=mn(R[V],2),F=G[0],X=G[1],le=X.capture,ge=X.passive;if(F===w&&le===T.capture&&ge===T.passive){R.splice(V,1),R.length||(E.splice(x,1),a(v,b,l),a(v,b,d,!0)),_=!0;break}}if(_)break}}},delegateListener:l,delegateUseCapture:d,delegatedEvents:n,documents:i,targets:o,supportsOptions:!1,supportsPassive:!1};function c(f,v,b,w){var y=et(w),x=Y.find(o,function(T){return T.eventTarget===f});x||(x={eventTarget:f,events:{}},o.push(x)),x.events[v]||(x.events[v]=[]),f.addEventListener&&!Y.contains(x.events[v],b)&&(f.addEventListener(v,b,r.supportsOptions?y:y.capture),x.events[v].push(b))}function a(f,v,b,w){var y=et(w),x=Y.findIndex(o,function(V){return V.eventTarget===f}),T=o[x];if(T&&T.events)if(v!=="all"){var E=!1,_=T.events[v];if(_){if(b==="all"){for(var L=_.length-1;L>=0;L--)a(f,v,_[L],y);return}for(var R=0;R<_.length;R++)if(_[R]===b){f.removeEventListener(v,b,r.supportsOptions?y:y.capture),_.splice(R,1),_.length===0&&(delete T.events[v],E=!0);break}}E&&!Object.keys(T.events).length&&o.splice(x,1)}else for(v in T.events)T.events.hasOwnProperty(v)&&a(f,v,"all")}function l(f,v){for(var b=et(v),w=new kr(f),y=n[f.type],x=mn(C.getEventTargets(f),1)[0],T=x;p.default.element(T);){for(var E=0;E<y.length;E++){var _=y[E],L=_.selector,R=_.context;if(D.matchesSelector(T,L)&&D.nodeContains(R,x)&&D.nodeContains(R,T)){var V=_.listeners;w.currentTarget=T;for(var G=0;G<V.length;G++){var F=mn(V[G],2),X=F[0],le=F[1],ge=le.capture,An=le.passive;ge===b.capture&&An===b.passive&&X(w)}}}T=D.parentNode(T)}}function d(f){return l(f,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return r.supportsOptions=!0},get passive(){return r.supportsPassive=!0}}),e.events=r,r}};Ct.default=Mr;var At={};Object.defineProperty(At,"__esModule",{value:!0}),At.default=void 0;var Dt={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Dt.methodOrder.length;t++){var o;o=Dt.methodOrder[t];var n=Dt[o](e);if(n)return n}return null},simulationResume:function(e){var t=e.pointerType,o=e.eventType,n=e.eventTarget,i=e.scope;if(!/down|start/i.test(o))return null;for(var r=0;r<i.interactions.list.length;r++){var c=i.interactions.list[r],a=n;if(c.simulation&&c.simulation.allowResume&&c.pointerType===t)for(;a;){if(a===c.element)return c;a=D.parentNode(a)}}return null},mouseOrPen:function(e){var t,o=e.pointerId,n=e.pointerType,i=e.eventType,r=e.scope;if(n!=="mouse"&&n!=="pen")return null;for(var c=0;c<r.interactions.list.length;c++){var a=r.interactions.list[c];if(a.pointerType===n){if(a.simulation&&!Do(a,o))continue;if(a.interacting())return a;t||(t=a)}}if(t)return t;for(var l=0;l<r.interactions.list.length;l++){var d=r.interactions.list[l];if(!(d.pointerType!==n||/down/i.test(i)&&d.simulation))return d}return null},hasPointer:function(e){for(var t=e.pointerId,o=e.scope,n=0;n<o.interactions.list.length;n++){var i=o.interactions.list[n];if(Do(i,t))return i}return null},idle:function(e){for(var t=e.pointerType,o=e.scope,n=0;n<o.interactions.list.length;n++){var i=o.interactions.list[n];if(i.pointers.length===1){var r=i.interactable;if(r&&(!r.options.gesture||!r.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&t===i.pointerType)return i}return null}};function Do(e,t){return e.pointers.some(function(o){return o.id===t})}var Or=Dt;At.default=Or;var It={};function Io(e){return(Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Lo(e,t){return function(o){if(Array.isArray(o))return o}(e)||function(o,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(o)){var i=[],r=!0,c=!1,a=void 0;try{for(var l,d=o[Symbol.iterator]();!(r=(l=d.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(f){c=!0,a=f}finally{try{r||d.return==null||d.return()}finally{if(c)throw a}}return i}}(e,t)||function(o,n){if(o){if(typeof o=="string")return jo(o,n);var i=Object.prototype.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?jo(o,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jo(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o})(e,t)}function Ar(e,t){return!t||Io(t)!=="object"&&typeof t!="function"?function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(e):t}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(It,"__esModule",{value:!0}),It.default=void 0;var bn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ro(e,t){return function(o){var n=t.interactions.list,i=C.getPointerType(o),r=Lo(C.getEventTargets(o),2),c=r[0],a=r[1],l=[];if(/^touch/.test(o.type)){t.prevTouchTime=t.now();for(var d=0;d<o.changedTouches.length;d++){var f=o.changedTouches[d],v={pointer:f,pointerId:C.getPointerId(f),pointerType:i,eventType:o.type,eventTarget:c,curEventTarget:a,scope:t},b=zo(v);l.push([v.pointer,v.eventTarget,v.curEventTarget,b])}}else{var w=!1;if(!Q.default.supportsPointerEvent&&/mouse/.test(o.type)){for(var y=0;y<n.length&&!w;y++)w=n[y].pointerType!=="mouse"&&n[y].pointerIsDown;w=w||t.now()-t.prevTouchTime<500||o.timeStamp===0}if(!w){var x={pointer:o,pointerId:C.getPointerId(o),pointerType:i,eventType:o.type,curEventTarget:a,eventTarget:c,scope:t},T=zo(x);l.push([x.pointer,x.eventTarget,x.curEventTarget,T])}}for(var E=0;E<l.length;E++){var _=Lo(l[E],4),L=_[0],R=_[1],V=_[2];_[3][e](L,o,R,V)}}}function zo(e){var t=e.pointerType,o=e.scope,n={interaction:At.default.search(e),searchDetails:e};return o.fire("interactions:find",n),n.interaction||o.interactions.new({pointerType:t})}function wn(e,t){var o=e.doc,n=e.scope,i=e.options,r=n.interactions.docEvents,c=n.events,a=c[t];for(var l in n.browser.isIOS&&!i.events&&(i.events={passive:!1}),c.delegatedEvents)a(o,l,c.delegateListener),a(o,l,c.delegateUseCapture,!0);for(var d=i&&i.events,f=0;f<r.length;f++){var v=r[f];a(o,v.type,v.listener,d)}}var Dr={id:"core/interactions",install:function(e){for(var t={},o=0;o<bn.length;o++){var n=bn[o];t[n]=Ro(n,e)}var i,r=Q.default.pEventTypes;function c(){for(var a=0;a<e.interactions.list.length;a++){var l=e.interactions.list[a];if(l.pointerIsDown&&l.pointerType==="touch"&&!l._interacting)for(var d=function(){var v=l.pointers[f];e.documents.some(function(b){var w=b.doc;return(0,D.nodeContains)(w,v.downTarget)})||l.removePointer(v.pointer,v.event)},f=0;f<l.pointers.length;f++)d()}}(i=I.default.PointerEvent?[{type:r.down,listener:c},{type:r.down,listener:t.pointerDown},{type:r.move,listener:t.pointerMove},{type:r.up,listener:t.pointerUp},{type:r.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:c},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(a){for(var l=0;l<e.interactions.list.length;l++)e.interactions.list[l].documentBlur(a)}}),e.prevTouchTime=0,e.Interaction=function(a){(function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),x&&Ho(y,x)})(w,a);var l,d,f,v,b=(f=w,v=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}(),function(){var y,x=yn(f);if(v){var T=yn(this).constructor;y=Reflect.construct(x,arguments,T)}else y=x.apply(this,arguments);return Ar(this,y)});function w(){return _r(this,w),b.apply(this,arguments)}return l=w,(d=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(y){e.interactions.pointerMoveTolerance=y}},{key:"_now",value:function(){return e.now()}}])&&Cr(l.prototype,d),w}(ie.default),e.interactions={list:[],new:function(a){a.scopeFire=function(d,f){return e.fire(d,f)};var l=new e.Interaction(a);return e.interactions.list.push(l),l},listeners:t,docEvents:i,pointerMoveTolerance:1},e.usePlugin(Le.default)},listeners:{"scope:add-document":function(e){return wn(e,"add")},"scope:remove-document":function(e){return wn(e,"remove")},"interactable:unset":function(e,t){for(var o=e.interactable,n=t.interactions.list.length-1;n>=0;n--){var i=t.interactions.list[n];i.interactable===o&&(i.stop(),t.fire("interactions:destroy",{interaction:i}),i.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(n,1))}}},onDocSignal:wn,doOnInteractions:Ro,methodNames:bn};It.default=Dr;var tt={};function Fo(e){return(Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function En(e,t,o){return(En=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(n,i,r){var c=function(l,d){for(;!Object.prototype.hasOwnProperty.call(l,d)&&(l=Re(l))!==null;);return l}(n,i);if(c){var a=Object.getOwnPropertyDescriptor(c,i);return a.get?a.get.call(r):a.value}})(e,t,o||e)}function Wo(e,t){return(Wo=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o})(e,t)}function Ir(e,t){return!t||Fo(t)!=="object"&&typeof t!="function"?function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Vo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bo(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function No(e,t,o){return t&&Bo(e.prototype,t),o&&Bo(e,o),e}Object.defineProperty(tt,"__esModule",{value:!0}),tt.initScope=Xo,tt.Scope=void 0;var Lr=function(){function e(){var t=this;Vo(this,e),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Q.default,this.defaults=(0,Pe.default)(Ge.defaults),this.Eventable=Qe.Eventable,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(0,gn.createInteractStatic)(this),this.InteractEvent=Ze.InteractEvent,this.Interactable=void 0,this.interactables=new _t.InteractableSet(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(n){return t.removeDocument(n.target)};var o=this;this.Interactable=function(n){(function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(d&&d.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),d&&Wo(l,d)})(a,n);var i,r,c=(i=a,r=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}(),function(){var l,d=Re(i);if(r){var f=Re(this).constructor;l=Reflect.construct(d,arguments,f)}else l=d.apply(this,arguments);return Ir(this,l)});function a(){return Vo(this,a),c.apply(this,arguments)}return No(a,[{key:"_defaults",get:function(){return o.defaults}},{key:"set",value:function(l){return En(Re(a.prototype),"set",this).call(this,l),o.fire("interactable:set",{options:l,interactable:this}),this}},{key:"unset",value:function(){En(Re(a.prototype),"unset",this).call(this),o.interactables.list.splice(o.interactables.list.indexOf(this),1),o.fire("interactable:unset",{interactable:this})}}]),a}(Ot.Interactable)}return No(e,[{key:"addListeners",value:function(t,o){this.listenerMaps.push({id:o,map:t})}},{key:"fire",value:function(t,o){for(var n=0;n<this.listenerMaps.length;n++){var i=this.listenerMaps[n].map[t];if(i&&i(o,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:Xo(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,o){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,o),t.listeners&&t.before){for(var n=0,i=this.listenerMaps.length,r=t.before.reduce(function(a,l){return a[l]=!0,a[Yo(l)]=!0,a},{});n<i;n++){var c=this.listenerMaps[n].id;if(r[c]||r[Yo(c)])break}this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,o){if(this.getDocIndex(t)!==-1)return!1;var n=s.getWindow(t);o=o?(0,A.default)({},o):{},this.documents.push({doc:t,options:o}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:o})}},{key:"removeDocument",value:function(t){var o=this.getDocIndex(t),n=s.getWindow(t),i=this.documents[o].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(o,1),this.events.documents.splice(o,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:i})}},{key:"getDocIndex",value:function(t){for(var o=0;o<this.documents.length;o++)if(this.documents[o].doc===t)return o;return-1}},{key:"getDocOptions",value:function(t){var o=this.getDocIndex(t);return o===-1?null:this.documents[o].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function Xo(e,t){return e.isInitialized=!0,p.default.window(t)&&s.init(t),I.default.init(t),Q.default.init(t),ce.default.init(t),e.window=t,e.document=t.document,e.usePlugin(It.default),e.usePlugin(Ct.default),e}function Yo(e){return e&&e.replace(/\/.*$/,"")}tt.Scope=Lr;var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.default=void 0;var qo=new tt.Scope,jr=qo.interactStatic;ee.default=jr;var Hr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;qo.init(Hr);var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.default=void 0,Lt.default=function(){};var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0,jt.default=function(){};var Ht={};function Uo(e,t){return function(o){if(Array.isArray(o))return o}(e)||function(o,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(o)){var i=[],r=!0,c=!1,a=void 0;try{for(var l,d=o[Symbol.iterator]();!(r=(l=d.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(f){c=!0,a=f}finally{try{r||d.return==null||d.return()}finally{if(c)throw a}}return i}}(e,t)||function(o,n){if(o){if(typeof o=="string")return $o(o,n);var i=Object.prototype.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?$o(o,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $o(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.default=void 0,Ht.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(n){var i=Uo(n,2),r=i[0],c=i[1];return r in e||c in e}),o=function(n,i){for(var r=e.range,c=e.limits,a=c===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:c,l=e.offset,d=l===void 0?{x:0,y:0}:l,f={range:r,grid:e,x:null,y:null},v=0;v<t.length;v++){var b=Uo(t[v],2),w=b[0],y=b[1],x=Math.round((n-d.x)/e[w]),T=Math.round((i-d.y)/e[y]);f[w]=Math.max(a.left,Math.min(a.right,x*e[w]+d.x)),f[y]=Math.max(a.top,Math.min(a.bottom,T*e[y]+d.y))}return f};return o.grid=e,o.coordFields=t,o};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),Object.defineProperty(nt,"edgeTarget",{enumerable:!0,get:function(){return Lt.default}}),Object.defineProperty(nt,"elements",{enumerable:!0,get:function(){return jt.default}}),Object.defineProperty(nt,"grid",{enumerable:!0,get:function(){return Ht.default}});var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=void 0;var Rr={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,A.default)(t.snappers||{},nt),t.createSnapGrid=t.snappers.grid}};Rt.default=Rr;var ze={};function Go(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),o.push.apply(o,n)}return o}function xn(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Go(Object(o),!0).forEach(function(n){zr(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Go(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function zr(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(ze,"__esModule",{value:!0}),ze.aspectRatio=ze.default=void 0;var Zo={start:function(e){if(!e.state.options.enabled)return!1;var t=e.state,o=e.rect,n=e.edges,i=e.pageCoords,r=t.options.ratio,c=t.options,a=c.equalDelta,l=c.modifiers;r==="preserve"&&(r=o.width/o.height),t.startCoords=(0,A.default)({},i),t.startRect=(0,A.default)({},o),t.ratio=r,t.equalDelta=a;var d=t.linkedEdges={top:n.top||n.left&&!n.bottom,left:n.left||n.top&&!n.right,bottom:n.bottom||n.right&&!n.top,right:n.right||n.bottom&&!n.left};if(t.xIsPrimaryAxis=!(!n.left&&!n.right),t.equalDelta)t.edgeSign=(d.left?1:-1)*(d.top?1:-1);else{var f=t.xIsPrimaryAxis?d.top:d.left;t.edgeSign=f?-1:1}if((0,A.default)(e.edges,d),l&&l.length){var v=new Te.default(e.interaction);v.copyFrom(e.interaction.modification),v.prepareStates(l),t.subModification=v,v.startAll(xn({},e))}},set:function(e){if(e.state.options.enabled===!1)return!1;var t=e.state,o=e.rect,n=e.coords,i=(0,A.default)({},n),r=t.equalDelta?Fr:Wr;if(r(t,t.xIsPrimaryAxis,n,o),!t.subModification)return null;var c=(0,A.default)({},o);(0,$.addEdges)(t.linkedEdges,c,{x:n.x-i.x,y:n.y-i.y});var a=t.subModification.setAll(xn(xn({},e),{},{rect:c,edges:t.linkedEdges,pageCoords:n,prevCoords:n,prevRect:c})),l=a.delta;return a.changed&&(r(t,Math.abs(l.x)>Math.abs(l.y),a.coords,a.rect),(0,A.default)(n,a.coords)),a.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Fr(e,t,o){var n=e.startCoords,i=e.edgeSign;t?o.y=n.y+(o.x-n.x)*i:o.x=n.x+(o.y-n.y)*i}function Wr(e,t,o,n){var i=e.startRect,r=e.startCoords,c=e.ratio,a=e.edgeSign;if(t){var l=n.width/c;o.y=r.y+(l-i.height)*a}else{var d=n.height*c;o.x=r.x+(d-i.width)*a}}ze.aspectRatio=Zo;var Vr=(0,J.makeModifier)(Zo,"aspectRatio");ze.default=Vr;var Me={};Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;var Ko=function(){};Ko._defaults={};var Br=Ko;Me.default=Br;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0}),Object.defineProperty(Sn,"default",{enumerable:!0,get:function(){return Me.default}});var te={};function Pn(e,t,o){return p.default.func(e)?$.resolveRectLike(e,t.interactable,t.element,[o.x,o.y,t]):$.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(te,"__esModule",{value:!0}),te.getRestrictionRect=Pn,te.restrict=te.default=void 0;var Qo={start:function(e){var t=e.rect,o=e.startOffset,n=e.state,i=e.interaction,r=e.pageCoords,c=n.options,a=c.elementRect,l=(0,A.default)({left:0,top:0,right:0,bottom:0},c.offset||{});if(t&&a){var d=Pn(c.restriction,i,r);if(d){var f=d.right-d.left-t.width,v=d.bottom-d.top-t.height;f<0&&(l.left+=f,l.right+=f),v<0&&(l.top+=v,l.bottom+=v)}l.left+=o.left-t.width*a.left,l.top+=o.top-t.height*a.top,l.right+=o.right-t.width*(1-a.right),l.bottom+=o.bottom-t.height*(1-a.bottom)}n.offset=l},set:function(e){var t=e.coords,o=e.interaction,n=e.state,i=n.options,r=n.offset,c=Pn(i.restriction,o,t);if(c){var a=$.xywhToTlbr(c);t.x=Math.max(Math.min(a.right-r.right,t.x),a.left+r.left),t.y=Math.max(Math.min(a.bottom-r.bottom,t.y),a.top+r.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};te.restrict=Qo;var Nr=(0,J.makeModifier)(Qo,"restrict");te.default=Nr;var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.restrictEdges=ue.default=void 0;var Jo={top:1/0,left:1/0,bottom:-1/0,right:-1/0},ei={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function ti(e,t){for(var o=["top","left","bottom","right"],n=0;n<o.length;n++){var i=o[n];i in e||(e[i]=t[i])}return e}var ni={noInner:Jo,noOuter:ei,start:function(e){var t,o=e.interaction,n=e.startOffset,i=e.state,r=i.options;if(r){var c=(0,te.getRestrictionRect)(r.offset,o,o.coords.start.page);t=$.rectToXY(c)}t=t||{x:0,y:0},i.offset={top:t.y+n.top,left:t.x+n.left,bottom:t.y-n.bottom,right:t.x-n.right}},set:function(e){var t=e.coords,o=e.edges,n=e.interaction,i=e.state,r=i.offset,c=i.options;if(o){var a=(0,A.default)({},t),l=(0,te.getRestrictionRect)(c.inner,n,a)||{},d=(0,te.getRestrictionRect)(c.outer,n,a)||{};ti(l,Jo),ti(d,ei),o.top?t.y=Math.min(Math.max(d.top+r.top,a.y),l.top+r.top):o.bottom&&(t.y=Math.max(Math.min(d.bottom+r.bottom,a.y),l.bottom+r.bottom)),o.left?t.x=Math.min(Math.max(d.left+r.left,a.x),l.left+r.left):o.right&&(t.x=Math.max(Math.min(d.right+r.right,a.x),l.right+r.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};ue.restrictEdges=ni;var Xr=(0,J.makeModifier)(ni,"restrictEdges");ue.default=Xr;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.restrictRect=Fe.default=void 0;var Yr=(0,A.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},te.restrict.defaults),oi={start:te.restrict.start,set:te.restrict.set,defaults:Yr};Fe.restrictRect=oi;var qr=(0,J.makeModifier)(oi,"restrictRect");Fe.default=qr;var We={};Object.defineProperty(We,"__esModule",{value:!0}),We.restrictSize=We.default=void 0;var Ur={width:-1/0,height:-1/0},$r={width:1/0,height:1/0},ii={start:function(e){return ue.restrictEdges.start(e)},set:function(e){var t=e.interaction,o=e.state,n=e.rect,i=e.edges,r=o.options;if(i){var c=$.tlbrToXywh((0,te.getRestrictionRect)(r.min,t,e.coords))||Ur,a=$.tlbrToXywh((0,te.getRestrictionRect)(r.max,t,e.coords))||$r;o.options={endOnly:r.endOnly,inner:(0,A.default)({},ue.restrictEdges.noInner),outer:(0,A.default)({},ue.restrictEdges.noOuter)},i.top?(o.options.inner.top=n.bottom-c.height,o.options.outer.top=n.bottom-a.height):i.bottom&&(o.options.inner.bottom=n.top+c.height,o.options.outer.bottom=n.top+a.height),i.left?(o.options.inner.left=n.right-c.width,o.options.outer.left=n.right-a.width):i.right&&(o.options.inner.right=n.left+c.width,o.options.outer.right=n.left+a.width),ue.restrictEdges.set(e),o.options=r}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};We.restrictSize=ii;var Gr=(0,J.makeModifier)(ii,"restrictSize");We.default=Gr;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Object.defineProperty(Tn,"default",{enumerable:!0,get:function(){return Me.default}});var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.snap=be.default=void 0;var ri={start:function(e){var t,o=e.interaction,n=e.interactable,i=e.element,r=e.rect,c=e.state,a=e.startOffset,l=c.options,d=l.offsetWithOrigin?function(b){var w=b.interaction.element;return(0,$.rectToXY)((0,$.resolveRectLike)(b.state.options.origin,null,null,[w]))||(0,xe.default)(b.interactable,w,b.interaction.prepared.name)}(e):{x:0,y:0};if(l.offset==="startCoords")t={x:o.coords.start.page.x,y:o.coords.start.page.y};else{var f=(0,$.resolveRectLike)(l.offset,n,i,[o]);(t=(0,$.rectToXY)(f)||{x:0,y:0}).x+=d.x,t.y+=d.y}var v=l.relativePoints;c.offsets=r&&v&&v.length?v.map(function(b,w){return{index:w,relativePoint:b,x:a.left-r.width*b.x+t.x,y:a.top-r.height*b.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,o=e.coords,n=e.state,i=n.options,r=n.offsets,c=(0,xe.default)(t.interactable,t.element,t.prepared.name),a=(0,A.default)({},o),l=[];i.offsetWithOrigin||(a.x-=c.x,a.y-=c.y);for(var d=0;d<r.length;d++)for(var f=r[d],v=a.x-f.x,b=a.y-f.y,w=0,y=i.targets.length;w<y;w++){var x,T=i.targets[w];(x=p.default.func(T)?T(v,b,t._proxy,f,w):T)&&l.push({x:(p.default.number(x.x)?x.x:v)+f.x,y:(p.default.number(x.y)?x.y:b)+f.y,range:p.default.number(x.range)?x.range:i.range,source:T,index:w,offset:f})}for(var E={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},_=0;_<l.length;_++){var L=l[_],R=L.range,V=L.x-a.x,G=L.y-a.y,F=(0,me.default)(V,G),X=F<=R;R===1/0&&E.inRange&&E.range!==1/0&&(X=!1),E.target&&!(X?E.inRange&&R!==1/0?F/R<E.distance/E.range:R===1/0&&E.range!==1/0||F<E.distance:!E.inRange&&F<E.distance)||(E.target=L,E.distance=F,E.range=R,E.inRange=X,E.delta.x=V,E.delta.y=G)}return E.inRange&&(o.x=E.target.x,o.y=E.target.y),n.closest=E,E},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};be.snap=ri;var Zr=(0,J.makeModifier)(ri,"snap");be.default=Zr;var ve={};function ai(e,t){(t==null||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}Object.defineProperty(ve,"__esModule",{value:!0}),ve.snapSize=ve.default=void 0;var si={start:function(e){var t=e.state,o=e.edges,n=t.options;if(!o)return null;e.state={options:{targets:null,relativePoints:[{x:o.left?0:1,y:o.top?0:1}],offset:n.offset||"self",origin:{x:0,y:0},range:n.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],be.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,o,n=e.interaction,i=e.state,r=e.coords,c=i.options,a=i.offsets,l={x:r.x-a[0].x,y:r.y-a[0].y};i.options=(0,A.default)({},c),i.options.targets=[];for(var d=0;d<(c.targets||[]).length;d++){var f=(c.targets||[])[d],v=void 0;if(v=p.default.func(f)?f(l.x,l.y,n):f){for(var b=0;b<i.targetFields.length;b++){var w=(t=i.targetFields[b],o=2,function(E){if(Array.isArray(E))return E}(t)||function(E,_){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(E)){var L=[],R=!0,V=!1,G=void 0;try{for(var F,X=E[Symbol.iterator]();!(R=(F=X.next()).done)&&(L.push(F.value),!_||L.length!==_);R=!0);}catch(le){V=!0,G=le}finally{try{R||X.return==null||X.return()}finally{if(V)throw G}}return L}}(t,o)||function(E,_){if(E){if(typeof E=="string")return ai(E,_);var L=Object.prototype.toString.call(E).slice(8,-1);return L==="Object"&&E.constructor&&(L=E.constructor.name),L==="Map"||L==="Set"?Array.from(E):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?ai(E,_):void 0}}(t,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),y=w[0],x=w[1];if(y in v||x in v){v.x=v[y],v.y=v[x];break}}i.options.targets.push(v)}}var T=be.snap.set(e);return i.options=c,T},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};ve.snapSize=si;var Kr=(0,J.makeModifier)(si,"snapSize");ve.default=Kr;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.snapEdges=Ve.default=void 0;var li={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],ve.snapSize.start(e)):null},set:ve.snapSize.set,defaults:(0,A.default)((0,Pe.default)(ve.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Ve.snapEdges=li;var Qr=(0,J.makeModifier)(li,"snapEdges");Ve.default=Qr;var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),Object.defineProperty(kn,"default",{enumerable:!0,get:function(){return Me.default}});var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0}),Object.defineProperty(Mn,"default",{enumerable:!0,get:function(){return Me.default}});var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.default=void 0;var Jr={aspectRatio:ze.default,restrictEdges:ue.default,restrict:te.default,restrictRect:Fe.default,restrictSize:We.default,snapEdges:Ve.default,snap:be.default,snapSize:ve.default,spring:kn.default,avoid:Sn.default,transform:Mn.default,rubberband:Tn.default};Be.default=Jr;var zt={};Object.defineProperty(zt,"__esModule",{value:!0}),zt.default=void 0;var ea={id:"modifiers",install:function(e){var t=e.interactStatic;for(var o in e.usePlugin(J.default),e.usePlugin(Rt.default),t.modifiers=Be.default,Be.default){var n=Be.default[o],i=n._defaults,r=n._methods;i._methods=r,e.defaults.perAction[o]=i}}};zt.default=ea;var Oe={};function ci(e){return(ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ta(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ui(e,t){return(ui=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o})(e,t)}function na(e,t){return!t||ci(t)!=="object"&&typeof t!="function"?On(e):t}function On(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.PointerEvent=Oe.default=void 0;var oa=function(e){(function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),l&&ui(a,l)})(c,e);var t,o,n,i,r=(n=c,i=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,l=_n(n);if(i){var d=_n(this).constructor;a=Reflect.construct(l,arguments,d)}else a=l.apply(this,arguments);return na(this,a)});function c(a,l,d,f,v,b){var w;if(function(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}(this,c),(w=r.call(this,v)).type=void 0,w.originalEvent=void 0,w.pointerId=void 0,w.pointerType=void 0,w.double=void 0,w.pageX=void 0,w.pageY=void 0,w.clientX=void 0,w.clientY=void 0,w.dt=void 0,w.eventable=void 0,C.pointerExtend(On(w),d),d!==l&&C.pointerExtend(On(w),l),w.timeStamp=b,w.originalEvent=d,w.type=a,w.pointerId=C.getPointerId(l),w.pointerType=C.getPointerType(l),w.target=f,w.currentTarget=null,a==="tap"){var y=v.getPointerIndex(l);w.dt=w.timeStamp-v.pointers[y].downTime;var x=w.timeStamp-v.tapTime;w.double=!!(v.prevTap&&v.prevTap.type!=="doubletap"&&v.prevTap.target===w.target&&x<500)}else a==="doubletap"&&(w.dt=l.timeStamp-v.tapTime);return w}return t=c,(o=[{key:"_subtractOrigin",value:function(a){var l=a.x,d=a.y;return this.pageX-=l,this.pageY-=d,this.clientX-=l,this.clientY-=d,this}},{key:"_addOrigin",value:function(a){var l=a.x,d=a.y;return this.pageX+=l,this.pageY+=d,this.clientX+=l,this.clientY+=d,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&ta(t.prototype,o),c}(De.BaseEvent);Oe.PointerEvent=Oe.default=oa;var ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var Ft={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=Ft,e.defaults.actions.pointerEvents=Ft.defaults,(0,A.default)(e.actions.phaselessTypes,Ft.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,o=e.pointerInfo;!t&&o.hold||(o.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var o=e.interaction,n=e.pointer,i=e.event,r=e.eventTarget;e.duplicate||o.pointerIsDown&&!o.pointerWasMoved||(o.pointerIsDown&&Cn(e),we({interaction:o,pointer:n,event:i,eventTarget:r,type:"move"},t))},"interactions:down":function(e,t){(function(o,n){for(var i=o.interaction,r=o.pointer,c=o.event,a=o.eventTarget,l=o.pointerIndex,d=i.pointers[l].hold,f=D.getPath(a),v={interaction:i,pointer:r,event:c,eventTarget:a,type:"hold",targets:[],path:f,node:null},b=0;b<f.length;b++){var w=f[b];v.node=w,n.fire("pointerEvents:collect-targets",v)}if(v.targets.length){for(var y=1/0,x=0;x<v.targets.length;x++){var T=v.targets[x].eventable.options.holdDuration;T<y&&(y=T)}d.duration=y,d.timeout=setTimeout(function(){we({interaction:i,eventTarget:a,pointer:r,event:c,type:"hold"},n)},y)}})(e,t),we(e,t)},"interactions:up":function(e,t){Cn(e),we(e,t),function(o,n){var i=o.interaction,r=o.pointer,c=o.event,a=o.eventTarget;i.pointerWasMoved||we({interaction:i,eventTarget:a,pointer:r,event:c,type:"tap"},n)}(e,t)},"interactions:cancel":function(e,t){Cn(e),we(e,t)}},PointerEvent:Oe.PointerEvent,fire:we,collectEventTargets:di,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function we(e,t){var o=e.interaction,n=e.pointer,i=e.event,r=e.eventTarget,c=e.type,a=e.targets,l=a===void 0?di(e,t):a,d=new Oe.PointerEvent(c,n,i,r,o,t.now());t.fire("pointerEvents:new",{pointerEvent:d});for(var f={interaction:o,pointer:n,event:i,eventTarget:r,targets:l,type:c,pointerEvent:d},v=0;v<l.length;v++){var b=l[v];for(var w in b.props||{})d[w]=b.props[w];var y=(0,xe.default)(b.eventable,b.node);if(d._subtractOrigin(y),d.eventable=b.eventable,d.currentTarget=b.node,b.eventable.fire(d),d._addOrigin(y),d.immediatePropagationStopped||d.propagationStopped&&v+1<l.length&&l[v+1].node!==d.currentTarget)break}if(t.fire("pointerEvents:fired",f),c==="tap"){var x=d.double?we({interaction:o,pointer:n,event:i,eventTarget:r,type:"doubletap"},t):d;o.prevTap=x,o.tapTime=x.timeStamp}return d}function di(e,t){var o=e.interaction,n=e.pointer,i=e.event,r=e.eventTarget,c=e.type,a=o.getPointerIndex(n),l=o.pointers[a];if(c==="tap"&&(o.pointerWasMoved||!l||l.downTarget!==r))return[];for(var d=D.getPath(r),f={interaction:o,pointer:n,event:i,eventTarget:r,type:c,path:d,targets:[],node:null},v=0;v<d.length;v++){var b=d[v];f.node=b,t.fire("pointerEvents:collect-targets",f)}return c==="hold"&&(f.targets=f.targets.filter(function(w){var y;return w.eventable.options.holdDuration===((y=o.pointers[a])==null?void 0:y.hold.duration)})),f.targets}function Cn(e){var t=e.interaction,o=e.pointerIndex,n=t.pointers[o].hold;n&&n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}var ia=Ft;ot.default=ia;var Wt={};function ra(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.default=void 0;var aa={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(ot.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=ra,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var o=e.interaction,n=e.pointerEvent,i=e.eventTarget,r=e.targets;if(n.type==="hold"&&r.length){var c=r[0].eventable.options.holdRepeatInterval;c<=0||(o.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:o,eventTarget:i,type:"hold",pointer:n,event:n},t)},c))}}})};Wt.default=aa;var Vt={};function sa(e){return(0,A.default)(this.events.options,e),this}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=void 0;var la={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=sa;var o=t.prototype._backCompatOption;t.prototype._backCompatOption=function(n,i){var r=o.call(this,n,i);return r===this&&(this.events.options[n]=i),r}},listeners:{"pointerEvents:collect-targets":function(e,t){var o=e.targets,n=e.node,i=e.type,r=e.eventTarget;t.interactables.forEachMatch(n,function(c){var a=c.events,l=a.options;a.types[i]&&a.types[i].length&&c.testIgnoreAllow(l,n,r)&&o.push({node:n,eventable:a,props:{interactable:c}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(o){return t.getRect(o)}},"interactable:set":function(e,t){var o=e.interactable,n=e.options;(0,A.default)(o.events.options,t.pointerEvents.defaults),(0,A.default)(o.events.options,n.pointerEvents||{})}}};Vt.default=la;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.default=void 0;var ca={id:"pointer-events",install:function(e){e.usePlugin(ot),e.usePlugin(Wt.default),e.usePlugin(Vt.default)}};Bt.default=ca;var it={};function pi(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(o){return function(n,i,r){for(var c=p.default.string(n.target)?Y.from(n._context.querySelectorAll(n.target)):[n.target],a=r.window.Promise,l=a?[]:null,d=function(){var v=c[f],b=n.getRect(v);if(!b)return"break";var w=Y.find(r.interactions.list,function(_){return _.interacting()&&_.interactable===n&&_.element===v&&_.prepared.name===i.name}),y=void 0;if(w)w.move(),l&&(y=w._reflowPromise||new a(function(_){w._reflowResolve=_}));else{var x=(0,$.tlbrToXywh)(b),T={page:{x:x.x,y:x.y},client:{x:x.x,y:x.y},timeStamp:r.now()},E=C.coordsToEvent(T);y=function(_,L,R,V,G){var F=_.interactions.new({pointerType:"reflow"}),X={interaction:F,event:G,pointer:G,eventTarget:R,phase:"reflow"};F.interactable=L,F.element=R,F.prevEvent=G,F.updatePointer(G,G,R,!0),C.setZeroCoords(F.coords.delta),(0,ae.copyAction)(F.prepared,V),F._doPhase(X);var le=_.window.Promise,ge=le?new le(function(An){F._reflowResolve=An}):void 0;return F._reflowPromise=ge,F.start(V,L,R),F._interacting?(F.move(X),F.end(G)):(F.stop(),F._reflowResolve()),F.removePointer(G,G),ge}(r,n,v,i,E)}l&&l.push(y)},f=0;f<c.length&&d()!=="break";f++);return l&&a.all(l).then(function(){return n})}(this,o,e)}}Object.defineProperty(it,"__esModule",{value:!0}),it.install=pi,it.default=void 0;var ua={id:"reflow",install:pi,listeners:{"interactions:stop":function(e,t){var o=e.interaction;o.pointerType==="reflow"&&(o._reflowResolve&&o._reflowResolve(),Y.remove(t.interactions.list,o))}}};it.default=ua;var se={exports:{}};function fi(e){return(fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(se.exports,"__esModule",{value:!0}),se.exports.default=void 0,ee.default.use(Le.default),ee.default.use(ke.default),ee.default.use(Bt.default),ee.default.use(He.default),ee.default.use(zt.default),ee.default.use(wt.default),ee.default.use(ht.default),ee.default.use(ye.default),ee.default.use(it.default),ee.default.use(xt.default);var da=ee.default;if(se.exports.default=da,fi(se)==="object"&&se)try{se.exports=ee.default}catch(e){}ee.default.default=ee.default,se=se.exports;var _e={exports:{}};function hi(e){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(_e.exports,"__esModule",{value:!0}),_e.exports.default=void 0;var pa=se.default;if(_e.exports.default=pa,hi(_e)==="object"&&_e)try{_e.exports=se.default}catch(e){}return se.default.default=se.default,_e.exports})});ya(exports,{default:()=>Bn,genId:()=>jn});function re(m,s){let u=Object.keys(s).map(h=>wa(m,h,s[h]));return u.length===1?u[0]:function(){u.forEach(h=>h())}}function wa(m,s,u){let h=m[s],g=m.hasOwnProperty(s),p=u(h);return h&&Object.setPrototypeOf(p,h),Object.setPrototypeOf(S,p),m[s]=S,P;function S(...M){return p===h&&m[s]===S&&P(),p.apply(this,M)}function P(){m[s]===S&&(g?m[s]=h:delete m[s]),p!==h&&(p=h,Object.setPrototypeOf(S,h||Function))}}var Z=Ne(require("obsidian"));var Ee=Ne(require("obsidian"));var z=Ne(require("obsidian"));var mi=10,Dn=60;function Xe(m){let s=m.body.querySelector(".app-container, .workspace-split"),u=m.body.querySelector(".mod-left.workspace-ribbon"),h=s.offsetTop,g=m.body.hasClass("hider-ribbon")?0:u?u.offsetWidth:0;return{top:h,left:g}}function Ea(m){let s=m.getAttribute("data-orig-height"),u=m.getAttribute("data-orig-width"),h=parseFloat(m.getAttribute("data-orig-pos-left")||"0"),g=parseFloat(m.getAttribute("data-orig-pos-top")||"0"),p=Xe(m.ownerDocument).top;return g<p&&(g=p),{height:s,width:u,top:g,left:h}}function Ye(m,s){let{height:u,width:h,top:g,left:p}=Ea(m);s||(m.removeAttribute("data-orig-width"),m.removeAttribute("data-orig-height"),m.removeAttribute("data-orig-pos-left"),m.removeAttribute("data-orig-pos-top")),h&&(m.style.width=h+"px"),u&&(m.style.height=u+"px"),g&&(m.style.top=g+"px",m.setAttribute("data-y",String(g))),p&&(m.style.left=p+"px")}function Xt(m){if(m.hasClass("snap-to-viewport")){m.removeClass("snap-to-viewport"),Ye(m);return}}function In(m,s){let u=m.querySelector(".view-content").offsetHeight;u=s?-u:u;let h=parseFloat(m.getAttribute("data-y")||"0")+u;m.style.top=h+"px",m.setAttribute("data-y",String(h))}function rt(m){m.hasAttribute("data-orig-width")||m.setAttribute("data-orig-width",String(m.offsetWidth)),m.hasAttribute("data-orig-height")||m.setAttribute("data-orig-height",String(m.offsetHeight)),m.hasAttribute("data-orig-pos-left")||m.setAttribute("data-orig-pos-left",String(parseFloat(m.style.left))),m.hasAttribute("data-orig-pos-top")||m.setAttribute("data-orig-pos-top",String(parseFloat(m.style.top)))}function yi(m){return m.hasAttribute("data-orig-width")&&m.hasAttribute("data-orig-height")&&m.hasAttribute("data-orig-pos-left")&&m.hasAttribute("data-orig-pos-top")}function Ln(m){let s=m.target,u=m.client.x-m.rect.left,h=m.rect.width,g=u/h,p=s.offsetWidth,S=String(m.client.x-g*p),P=String(m.client.y);s.setAttribute("data-x",String(S)),s.setAttribute("data-y",String(P))}function Ce(m,s,u){m.addClass(`snap-to-${s}`),m.style.top=u.top+"px",m.style.height=`calc(100vh - ${u.top}px)`,m.style.left=s==="right"?"unset":u.left+"px",s==="viewport"&&(m.style.width=`calc(100vw - ${u.left}px)`)}function bi(m){let s=m.target,{x:u,y:h}=s.dataset;if(u=u||s.style.left,h=h||s.style.top,u=String((parseFloat(u)||0)+m.dx),h=String((parseFloat(h)||0)+m.dy),this.plugin.settings.snapToEdges){let g,p=s.ownerDocument,S=m.client.x<mi,P=m.client.x>p.body.offsetWidth-mi,M=m.client.y<30;if((S||P||M)&&(g=Xe(p),rt(s)),S&&m.buttons){Ce(s,"left",g);return}else if(P&&m.buttons){Ce(s,"right",g);return}else if(M&&m.buttons){Ce(s,"viewport",g);return}else if(s.hasClass("snap-to-viewport")){if(m.client.y<Dn)return;s.removeClass("snap-to-viewport"),Ye(s),Ln(m);return}else if(s.hasClass("snap-to-left")){if(m.client.y<Dn)return;s.removeClass("snap-to-left"),Ye(s),Ln(m);return}else if(s.hasClass("snap-to-right")){if(m.client.y<Dn)return;s.removeClass("snap-to-right"),Ye(s),Ln(m);return}}s.style.top=h?h+"px":s.style.top,s.style.left=u?u+"px":s.style.left,s.setAttribute("data-x",String(u)),s.setAttribute("data-y",String(h))}var wi=["left","right","viewport"],Ei=(m,s)=>{var h;let u=(h=q.activePopover)==null?void 0:h.hoverEl;if(u&&u instanceof HTMLElement){if(!s){yi(u)?Ye(u,!0):rt(u),u.removeClasses(["snap-to-left","snap-to-right","snap-to-viewport"]);let g=Xe(u.ownerDocument);Ce(u,m,g)}return!0}return!1},xi=m=>{var u;let s=(u=q.activePopover)==null?void 0:u.hoverEl;return s&&s instanceof HTMLElement?(m||yi(s)&&(s.removeClasses(["snap-to-left","snap-to-right","snap-to-viewport"]),Ye(s)),!0):!1},Si=m=>{var h;let s=(h=q.activePopover)==null?void 0:h.hoverEl,u=q.activePopovers().find(g=>g.hoverEl===s);return u?(m||u.toggleMinimized(),!0):!1};var Yt=new WeakMap,qt={x:0,y:0};function xa(m){let s=function(){return z.Component.call(this)};return s.prototype=m.prototype,Object.setPrototypeOf(s,m)}var Ti,ki,Mi,Oi,_i,q=class extends xa(z.HoverPopover){constructor(s,u,h,g,p){super();this.targetEl=u;this.plugin=h;this.onShowCallback=p;this.isPinned=this.plugin.settings.autoPin==="always";this.abortController=this.addChild(new z.Component);this.detaching=!1;this.opening=!1;this.rootSplit=new z.WorkspaceSplit(window.app.workspace,"vertical");this.targetRect=(Ti=this.targetEl)==null?void 0:Ti.getBoundingClientRect();this.oldPopover=(ki=this.parent)==null?void 0:ki.hoverPopover;this.document=(_i=(Oi=(Mi=this.targetEl)==null?void 0:Mi.ownerDocument)!=null?Oi:window.activeDocument)!=null?_i:window.document;this.interactStatic=this.plugin.interact.forDom(this.document).interact;this.id=jn(8);this.hoverEl=this.document.defaultView.createDiv({cls:"popover hover-popover",attr:{id:"he"+this.id}});g===void 0&&(g=300),this.onTarget=!0,this.onHover=!1,this.shownPos=null,this.parent=s,this.waitTime=g,this.state=z.PopoverState.Showing;let{hoverEl:S}=this;this.onMouseIn=this._onMouseIn.bind(this),this.onMouseOut=this._onMouseOut.bind(this),this.abortController.load(),u&&(u.addEventListener("mouseover",this.onMouseIn),u.addEventListener("mouseout",this.onMouseOut)),S.addEventListener("mouseover",M=>{Ut(M,S)&&(this.onHover=!0,this.onTarget=!1,this.transition())}),S.addEventListener("mouseout",M=>{Ut(M,S)&&(this.onHover=!1,this.onTarget=!1,this.transition())}),this.timer=window.setTimeout(this.show.bind(this),g),this.document.addEventListener("mousemove",st),Yt.set(this.hoverEl,this),this.hoverEl.addClass("hover-editor"),this.containerEl=this.hoverEl.createDiv("popover-content"),this.buildWindowControls(),this.setInitialDimensions();let P=this.pinEl=this.document.defaultView.createEl("a","popover-header-icon mod-pin-popover");this.titleEl.prepend(this.pinEl),P.onclick=()=>{this.togglePin()},z.requireApiVersion&&(0,z.requireApiVersion)("0.13.27")?(0,z.setIcon)(P,"lucide-pin",17):(0,z.setIcon)(P,"pin",17),this.createResizeHandles(),this.plugin.settings.imageZoom&&this.registerZoomImageHandlers()}static activeWindows(){let s=[window],{floatingSplit:u}=app.workspace;if(u)for(let h of u.children)h.win&&s.push(h.win);return s}static activePopovers(){return this.activeWindows().flatMap(s=>Array.prototype.slice.call(s.document.body.querySelectorAll(".hover-popover")).map(u=>Yt.get(u)).filter(u=>u))}static forLeaf(s){let u=s&&document.body.matchParent.call(s.containerEl,".hover-popover");return u?Yt.get(u):void 0}static iteratePopoverLeaves(s,u){for(let h of this.activePopovers())if(h.rootSplit&&s.iterateLeaves(u,h.rootSplit))return!0;return!1}adopt(s){if(this.targetEl===s)return!0;let u=s==null?void 0:s.getBoundingClientRect();if(Pi(this.targetRect,u)){this.targetEl.removeEventListener("mouseover",this.onMouseIn),this.targetEl.removeEventListener("mouseout",this.onMouseOut),s.addEventListener("mouseover",this.onMouseIn),s.addEventListener("mouseout",this.onMouseOut),this.targetEl=s,this.targetRect=u;let{x:h,y:g}=qt;return this.onTarget=Pi(u,{left:h,right:h,top:g,bottom:g}),this.transition(),!0}else this.onTarget=!1,this.transition();return!1}onZoomOut(){this.document.body.removeEventListener("mouseup",this.boundOnZoomOut),this.document.body.removeEventListener("dragend",this.boundOnZoomOut),this.hoverEl.hasClass("do-not-restore")?this.hoverEl.removeClass("do-not-restore"):Xt(this.hoverEl)}onZoomIn(s){if(s.button!==0)return;this.hoverEl.hasClass("snap-to-viewport")&&this.hoverEl.addClass("do-not-restore"),this.document.body.addEventListener("mouseup",this.boundOnZoomOut,{once:!0}),this.document.body.addEventListener("dragend",this.boundOnZoomOut,{once:!0});let u=Xe(this.document);return rt(this.hoverEl),Ce(this.hoverEl,"viewport",u),!1}registerZoomImageHandlers(){this.hoverEl.addClass("image-zoom"),this.boundOnZoomOut=this.onZoomOut.bind(this),this.hoverEl.on("mousedown","img",this.onZoomIn.bind(this))}togglePin(s){var u;s===void 0&&(s=!this.isPinned),s&&((u=this.abortController)==null||u.unload()),this.hoverEl.toggleClass("is-pinned",s),this.pinEl.toggleClass("is-active",s),this.isPinned=s}getDefaultMode(){var s,u;return((u=(s=this.parent)==null?void 0:s.view)==null?void 0:u.getMode)?this.parent.view.getMode():"preview"}updateLeaves(){this.onTarget&&this.targetEl&&!this.document.contains(this.targetEl)&&(this.onTarget=!1,this.transition());let s=0;this.plugin.app.workspace.iterateLeaves(u=>{s++},this.rootSplit),s===0?this.hide():s>1&&this.toggleConstrainAspectRatio(!1),this.hoverEl.setAttribute("data-leaf-count",s.toString())}get headerHeight(){let s=this.hoverEl;return this.titleEl.getBoundingClientRect().bottom-s.getBoundingClientRect().top}toggleMinimized(s){var g;let u=this.hoverEl,h=this.headerHeight;if(!u.hasAttribute("data-restore-height"))this.plugin.settings.rollDown&&In(u,!1),u.setAttribute("data-restore-height",String(u.offsetHeight)),u.style.minHeight=h+"px",u.style.maxHeight=h+"px",u.toggleClass("is-minimized",!0);else{let p=u.getAttribute("data-restore-height");p&&(u.removeAttribute("data-restore-height"),u.style.height=p+"px"),u.style.removeProperty("max-height"),u.toggleClass("is-minimized",!1),this.plugin.settings.rollDown&&In(u,!0)}(g=this.interact)==null||g.reflow({name:"drag",axis:"xy"})}attachLeaf(){this.rootSplit.getRoot=()=>this.plugin.app.workspace.rootSplit,this.titleEl.insertAdjacentElement("afterend",this.rootSplit.containerEl);let s=this.plugin.app.workspace.createLeafInParent(this.rootSplit,0);return this.updateLeaves(),s}onload(){super.onload(),this.registerEvent(this.plugin.app.workspace.on("layout-change",this.updateLeaves,this))}leaves(){let s=[];return this.plugin.app.workspace.iterateLeaves(u=>{s.push(u)},this.rootSplit),s}setInitialDimensions(){this.hoverEl.style.height=this.plugin.settings.initialHeight,this.hoverEl.style.width=this.plugin.settings.initialWidth}toggleViewHeader(s){var g;s===void 0&&(s=!this.hoverEl.hasClass("show-navbar")),(g=this.hideNavBarEl)==null||g.toggleClass("is-active",s),this.hoverEl.toggleClass("show-navbar",s);let u=this.hoverEl.querySelector(".view-header");if(!u)return;let h=parseFloat(getComputedStyle(u).getPropertyValue("--he-view-header-height"));this.hoverEl.style.transition="height 0.2s",s?this.hoverEl.style.height=parseFloat(this.hoverEl.style.height)+h+"px":this.hoverEl.style.height=parseFloat(this.hoverEl.style.height)-h+"px",setTimeout(()=>{this.hoverEl.style.removeProperty("transition")},200),this.requestLeafMeasure()}buildWindowControls(){this.titleEl=this.document.defaultView.createDiv("popover-titlebar"),this.titleEl.createDiv("popover-title");let s=this.titleEl.createDiv("popover-actions"),u=this.hideNavBarEl=s.createEl("a","popover-action mod-show-navbar");(0,z.setIcon)(u,"sidebar-open",14),u.addEventListener("click",S=>{this.toggleViewHeader()}),this.plugin.settings.showViewHeader&&this.toggleViewHeader(!0);let h=s.createEl("a","popover-action mod-minimize");(0,z.setIcon)(h,"minus"),h.addEventListener("click",S=>{Xt(this.hoverEl),this.toggleMinimized()});let g=s.createEl("a","popover-action mod-maximize");(0,z.setIcon)(g,"maximize",14),g.addEventListener("click",S=>{if(this.hoverEl.hasClass("snap-to-viewport")){(0,z.setIcon)(g,"maximize",14),Xt(this.hoverEl);return}(0,z.setIcon)(g,"minimize",14);let P=Xe(this.document);rt(this.hoverEl),Ce(this.hoverEl,"viewport",P)});let p=s.createEl("a","popover-action mod-close");(0,z.setIcon)(p,"x"),p.addEventListener("click",S=>{this.hide()}),this.containerEl.prepend(this.titleEl)}requestLeafMeasure(){let s=this.leaves();s.length&&setTimeout(()=>{s.forEach(u=>u.onResize())},200)}onShow(){var u,h;let{closeDelay:s}=this.plugin.settings;setTimeout(()=>this.waitTime=s,s),(u=this.oldPopover)==null||u.hide(),this.oldPopover=null,this.hoverEl.toggleClass("is-new",!0),this.document.body.addEventListener("click",()=>{this.hoverEl.toggleClass("is-new",!1)},{once:!0,capture:!0}),this.parent&&(this.parent.hoverPopover=this),this.togglePin(this.isPinned),(h=this.onShowCallback)==null||h.call(this),this.onShowCallback=void 0}startBounce(){this.bounce=setTimeout(()=>{this.hoverEl.style.left=parseFloat(this.hoverEl.style.left)+this.xspeed+"px",this.hoverEl.style.top=parseFloat(this.hoverEl.style.top)+this.yspeed+"px",this.checkHitBox(),this.startBounce()},20)}toggleBounce(){if(this.xspeed=7,this.yspeed=7,this.bounce){clearTimeout(this.bounce),this.bounce=void 0;let s=this.hoverEl.querySelector(".view-content");(s==null?void 0:s.style)&&s.style.removeProperty("backgroundColor")}else this.startBounce()}checkHitBox(){let s=parseFloat(this.hoverEl.style.left),u=parseFloat(this.hoverEl.style.top),h=parseFloat(this.hoverEl.style.width),g=parseFloat(this.hoverEl.style.height);(s<=0||s+h>=this.document.body.offsetWidth)&&(this.xspeed*=-1,this.pickColor()),(u<=0||u+g>=this.document.body.offsetHeight)&&(this.yspeed*=-1,this.pickColor())}pickColor(){let s=Math.random()*(254-0)+0,u=Math.random()*(254-0)+0,h=Math.random()*(254-0)+0,g=this.hoverEl.querySelector(".view-content");(g==null?void 0:g.style)&&(g.style.backgroundColor="rgb("+s+","+u+", "+h+")")}transition(){this.shouldShow()?this.state===z.PopoverState.Hiding&&(this.state=z.PopoverState.Shown,clearTimeout(this.timer)):this.state===z.PopoverState.Showing?this.hide():this.state===z.PopoverState.Shown&&(this.state=z.PopoverState.Hiding,this.timer=window.setTimeout(()=>{this.shouldShow()?this.transition():this.hide()},this.waitTime))}detect(s){let{targetEl:u,hoverEl:h}=this;u&&(this.onTarget=s===u||u.contains(s)),this.onHover=s===h||h.contains(s)}_onMouseIn(s){this.targetEl&&!Ut(s,this.targetEl)||(this.onTarget=!0,this.transition())}_onMouseOut(s){this.targetEl&&!Ut(s,this.targetEl)||(this.onTarget=!1,this.transition())}position(s){s===void 0&&(s=this.shownPos);let u;if(s)u={top:s.y-10,bottom:s.y+10,left:s.x,right:s.x};else if(this.targetEl){let h=Pa(this.targetEl,this.document.body);u={top:h.top,bottom:h.top+this.targetEl.offsetHeight,left:h.left,right:h.left+this.targetEl.offsetWidth}}else u={top:0,bottom:0,left:0,right:0};this.document.body.appendChild(this.hoverEl),Sa(u,this.hoverEl,{gap:10},this.document),s&&setTimeout(()=>{let h=parseFloat(this.hoverEl.style.left),g=parseFloat(this.hoverEl.style.top);this.hoverEl.setAttribute("data-x",String(h)),this.hoverEl.setAttribute("data-y",String(g))},0)}shouldShow(){return this.shouldShowSelf()||this.shouldShowChild()}shouldShowChild(){return q.activePopovers().some(s=>s!==this&&s.targetEl&&this.hoverEl.contains(s.targetEl)?s.shouldShow():!1)}shouldShowSelf(){return!this.detaching&&!!(this.onTarget||this.onHover||this.state==z.PopoverState.Shown&&this.isPinned||this.document.querySelector(`body>.modal-container, body > #he${this.id} ~ .menu`))}calculateMinSize(){return{width:40,height:this.headerHeight}}calculateBoundaries(s,u,h){let g=h.element.closest("body"),p=(g==null?void 0:g.querySelector(".workspace"))||(g==null?void 0:g.querySelector(".workspace-window"));return p==null?void 0:p.getBoundingClientRect()}calculateMaxSize(s,u,h){let g=h.pointerType==="reflow"?this.document.body.offsetWidth/1.5:this.document.body.offsetWidth,p=h.pointerType==="reflow"?this.document.body.offsetHeight/1.5:this.document.body.offsetHeight;return{width:g,height:p}}toggleConstrainAspectRatio(s,u){let h=this.resizeModifiers.find(g=>g.name=="aspectRatio");!h||(s===void 0&&(s=!h.options.enabled),s?(h.enable(),this.constrainAspectRatio=!0,u!==void 0&&h.options.ratio!==u&&(h.options.ratio=u)):(h.disable(),this.constrainAspectRatio=!1))}registerInteract(){var O,U;let s=this.document.querySelector("div.app-container, div.workspace-split"),u=this,h=function(k,B,W){let{top:N,right:I,bottom:H,left:oe,x:de,y:Q,width:K,height:Zt}=s.getBoundingClientRect(),D={top:N,right:I,bottom:H,left:oe,x:de,y:Q,width:K,height:Zt};return W.pointerType==="reflow"?u.dragElementRect.bottom=1:u.dragElementRect.bottom=0,u.plugin.settings.snapToEdges&&(D.top=N-30),D.bottom=H-u.headerHeight,D},g=!0,p,S=((O=this.hoverEl.dataset)==null?void 0:O.imgRatio)?parseFloat((U=this.hoverEl.dataset)==null?void 0:U.imgRatio):void 0;this.resizeModifiers=[this.interactStatic.modifiers.restrictEdges({outer:u.calculateBoundaries.bind(this)}),this.interactStatic.modifiers.restrictSize({min:u.calculateMinSize.bind(this),max:u.calculateMaxSize.bind(this)}),this.interactStatic.modifiers.aspectRatio({ratio:S||"preserve",enabled:!1})],this.dragElementRect={top:0,left:1,bottom:0,right:0};let P=[this.interactStatic.modifiers.restrict({restriction:h,offset:{top:0,left:40,bottom:0,right:40},elementRect:this.dragElementRect,endOnly:!1})];this.constrainAspectRatio&&S!==void 0&&this.toggleConstrainAspectRatio(!0,S);let M=this.interactStatic(this.hoverEl).preventDefault("always").on("doubletap",this.onDoubleTap.bind(this)).draggable({modifiers:P,allowFrom:".popover-titlebar",listeners:{start(k){k.buttons&&u.togglePin(!0),k.buttons&&k.target instanceof HTMLElement&&k.target.addClass("is-dragging")},end(k){k.target instanceof HTMLElement&&k.target.removeClass("is-dragging")},move:bi.bind(u)}}).resizable({edges:{top:".top-left, .top-right, .top",left:".top-left, .bottom-left, .left",bottom:".bottom-left, .bottom-right, .bottom",right:".top-right, .bottom-right, .right"},modifiers:this.resizeModifiers,listeners:{start(k){var I;k.target.style.removeProperty("max-height");let W=(I=u.hoverEl.querySelector(".view-header"))==null?void 0:I.offsetHeight;p=u.titleEl.offsetHeight+W,g=!0,k.buttons&&u.togglePin(!0)},move:function(k){var oe,de;if(!(k==null?void 0:k.deltaRect)||!k.edges)return;let{target:B}=k,{x:W,y:N}=B.dataset,I=k.rect.height,H=k.rect.width;W=W||B.style.left,N=N||B.style.top,W=String((parseFloat(W)||0)+((oe=k.deltaRect)==null?void 0:oe.left)),N=String((parseFloat(N)||0)+((de=k.deltaRect)==null?void 0:de.top)),u.constrainAspectRatio&&S&&k.buttons!==void 0?(g&&(k.edges.top&&(k.edges.right||k.edges.left)?N=String(parseFloat(N)-p):k.edges.top?W=String(parseFloat(W)+p*S):k.edges.left&&!(k.edges.top||k.edges.bottom)&&(N=String(parseFloat(N)-p))),g=!1,(k.edges.top&&!(k.edges.right||k.edges.left)||k.edges.bottom&&!(k.edges.right||k.edges.left))&&(I=I-p,H=H-p*S),I=I+p,(B.hasClass("snap-to-left")||B.hasClass("snap-to-right"))&&(N=String(parseFloat(B.style.top)),W=String(parseFloat(B.style.left)))):S&&I>this.document.body.offsetHeight&&(I=I/1.5,H=I*S),Object.assign(B.style,{width:`${H}px`,height:`${I}px`,top:`${N}px`,left:W==="NaN"?"unset":`${W}px`}),Object.assign(B.dataset,{x:W,y:N})},end:function(k){if(k.buttons===void 0){let B=parseFloat(k.target.style.height)+p;k.target.style.height=B+"px"}k.rect.height>u.headerHeight&&k.target.removeAttribute("data-restore-height"),M.reflow({name:"drag",axis:"xy"})}}});this.interact=M}createResizeHandles(){this.hoverEl.createDiv("resize-handle bottom-left"),this.hoverEl.createDiv("resize-handle bottom-right"),this.hoverEl.createDiv("resize-handle top-left"),this.hoverEl.createDiv("resize-handle top-right"),this.hoverEl.createDiv("resize-handle right"),this.hoverEl.createDiv("resize-handle left"),this.hoverEl.createDiv("resize-handle bottom"),this.hoverEl.createDiv("resize-handle top")}onDoubleTap(s){s.target.tagName==="DIV"&&s.target.closest(".popover-titlebar")&&(s.preventDefault(),this.togglePin(!0),this.toggleMinimized())}show(){var s,u;!this.targetEl||this.document.body.contains(this.targetEl)?(this.state=z.PopoverState.Shown,this.timer=0,this.shownPos=qt,this.position(qt),this.document.removeEventListener("mousemove",st),this.onShow(),this.load()):this.hide(),this.hoverEl.dataset.imgHeight&&this.hoverEl.dataset.imgWidth&&(this.hoverEl.style.height=parseFloat(this.hoverEl.dataset.imgHeight)+this.titleEl.offsetHeight+"px",this.hoverEl.style.width=parseFloat(this.hoverEl.dataset.imgWidth)+"px"),this.registerInteract(),(s=this.interact)==null||s.reflow({name:"resize",edges:{right:!0,bottom:!0}}),(u=this.interact)==null||u.reflow({name:"drag",axis:"xy"})}onHide(){var s;this.oldPopover=null,((s=this.parent)==null?void 0:s.hoverPopover)===this&&(this.parent.hoverPopover=null)}hide(){var u,h;if(this.onTarget=this.onHover=!1,this.isPinned=!1,this.detaching=!0,this.document.removeEventListener("mousemove",st),this.timer&&(clearTimeout(this.timer),this.timer=0),this.hoverEl.hide(),this.opening)return;let s=this.leaves();if(s.length)s.forEach(g=>g.detach());else return this.parent=null,((u=this.interact)==null?void 0:u.unset)&&this.interact.unset(),(h=this.abortController)==null||h.unload(),this.abortController=void 0,this.interact=void 0,this.nativeHide()}nativeHide(){var h;let{hoverEl:s,targetEl:u}=this;if(this.state=z.PopoverState.Hidden,s.detach(),u){let g=u.matchParent(".hover-popover");g&&((h=Yt.get(g))==null||h.transition()),u.removeEventListener("mouseover",this.onMouseIn),u.removeEventListener("mouseout",this.onMouseOut)}this.onHide(),this.unload()}resolveLink(s,u){let h=(0,z.parseLinktext)(s);return h?this.plugin.app.metadataCache.getFirstLinkpathDest(h.path,u):null}async openLink(s,u,h,g){var W,N,I;let p=this.resolveLink(s,u),S=(0,z.parseLinktext)(s);if(!p&&g){let H=this.plugin.app.fileManager.getNewFileParent(u);p=await this.plugin.app.fileManager.createNewMarkdownFile(H,S.path)}if(!p){this.displayCreateFileAction(s,u,h);return}let{viewRegistry:P}=this.plugin.app,M=P.typeByExtension[p.extension];if(!M||!P.viewByType[M]){this.displayOpenFileAction(p);return}h=Object.assign(this.buildEphemeralState(p,S),h);let O=this.getDefaultMode(),U=this.buildState(O,h),k=await this.openFile(p,U,g),B=(W=k==null?void 0:k.view)==null?void 0:W.getViewType();if(B==="image"){this.plugin.settings.autoFocus&&((N=this.parent)==null?void 0:N.hasOwnProperty("editorEl"))&&this.parent.editorEl.hasClass("is-live-preview")&&(this.waitTime=3e3),this.constrainAspectRatio=!0;let H=k.view.contentEl.querySelector("img");this.hoverEl.dataset.imgHeight=String(H.naturalHeight),this.hoverEl.dataset.imgWidth=String(H.naturalWidth),this.hoverEl.dataset.imgRatio=String(H.naturalWidth/H.naturalHeight)}else B==="pdf"&&(this.hoverEl.style.height="800px",this.hoverEl.style.width="600px");((I=U.state)==null?void 0:I.mode)==="source"&&setTimeout(()=>{var H;this.detaching||(H=k==null?void 0:k.view)==null||H.setEphemeralState(U.eState)},this.plugin.settings.triggerDelay)}displayOpenFileAction(s){let h=this.attachLeaf().view;h.emptyTitleEl.hide(),h.actionListEl.empty();let{actionListEl:g}=h;g.createDiv({cls:"file-embed-title"},p=>{p.createSpan({cls:"file-embed-icon"},S=>(0,z.setIcon)(S,"document",22)),p.appendText(" "+s.name)}),g.addEventListener("click",()=>this.plugin.app.openWithDefaultApp(s.path)),g.setAttribute("aria-label",i18next.t("interface.embed-open-in-default-app-tooltip"))}displayCreateFileAction(s,u,h){var S,P,M;let g=this.attachLeaf(),p=g.view;if(p){(S=p.emptyTitleEl)==null||S.hide(),(P=p.actionListEl)==null||P.empty();let O=(M=p.actionListEl)==null?void 0:M.createEl("button","empty-state-action");if(!O)return;O.textContent=`${s} is not yet created. Click to create.`,this.plugin.settings.autoFocus&&setTimeout(()=>{O==null||O.focus()},200),O.addEventListener("click",async()=>{this.togglePin(!0),await this.openLink(s,u,h,g)},{once:!0})}}async openFile(s,u,h){var p,S,P;if(this.detaching)return;let g=h!=null?h:this.attachLeaf();this.opening=!0;try{if(await g.openFile(s,u),this.plugin.settings.autoFocus&&!this.detaching){let M=this.onShowCallback;this.onShowCallback=()=>{this.plugin.app.workspace.setActiveLeaf(g,!1,!0),setTimeout(re(z.Workspace.prototype,{recordMostRecentOpenedFile(U){return function(k){if(k!==s)return U.call(this,k)}}}),1);let O=this.plugin.app.plugins.plugins["recent-files-obsidian"];O&&setTimeout(re(O,{shouldAddFile(U){return function(k){return k!==s&&U.call(this,k)}}}),1),M instanceof Function&&M()},this.state===z.PopoverState.Shown&&(this.onShowCallback(),this.onShowCallback=void 0)}else if(!this.plugin.settings.autoFocus&&!this.detaching){let M=this.hoverEl.querySelector(".popover-title");if(!M)return;M.textContent=(p=g.view)==null?void 0:p.getDisplayText(),M.setAttribute("data-path",(P=(S=g.view)==null?void 0:S.file)==null?void 0:P.path)}}catch(M){console.error(M)}finally{this.opening=!1,this.detaching&&this.hide()}return g}buildState(s,u){return{state:{mode:this.plugin.settings.defaultMode==="match"?s:this.plugin.settings.defaultMode},eState:u}}buildEphemeralState(s,u){let h=this.plugin.app.metadataCache.getFileCache(s),g=h?(0,z.resolveSubpath)(h,(u==null?void 0:u.subpath)||""):void 0,p={subpath:u==null?void 0:u.subpath};return g&&(p.line=g.start.line,p.startLoc=g.start,p.endLoc=g.end||void 0),p}};function at(m){return m.containerEl.matches(".popover.hover-popover.hover-editor .workspace-leaf")}function Sa(m,s,u,h){u=u||{},s.show();let g=u.gap||0,p=u.preference||"bottom",S=u.offsetParent||s.offsetParent||h.documentElement,P=u.horizontalAlignment||"left",M=S.scrollTop+10,O=S.scrollTop+S.clientHeight-10,U=Math.min(m.top,O),k=Math.max(m.bottom,M),B=s.offsetHeight,W=m.top-M>=B+g,N=O-m.bottom>=B+g,I=0,H="";!W||p!=="top"&&N?!N||p!=="bottom"&&W?S.clientHeight<B+g?(I=M,H="overlap"):p==="top"?(I=M+g,H="overlap"):(I=O-B,H="overlap"):(I=k+g,H="bottom"):(I=U-g-B,H="top");let oe=S.scrollLeft+10,de=S.scrollLeft+S.clientWidth-10,Q=s.offsetWidth,K=P==="left"?m.left:m.right-Q;return K<oe?K=oe:K>de-Q&&(K=de-Q),s.style.top="".concat(I.toString(),"px"),s.style.left="".concat(K.toString(),"px"),{top:I,left:K,vresult:H}}function Pa(m,s){let u=0,h=0;for(let g=s?s.offsetParent:null;m&&m!==s&&m!==g;){u+=m.offsetTop,h+=m.offsetLeft;let p=m.offsetParent;for(let S=m.parentElement;S&&S!==p;)u-=S.scrollTop,h-=S.scrollLeft,S=S.parentElement;p&&p!==s&&p!==g&&(u-=p.scrollTop,h-=p.scrollLeft),m=p}return{top:u,left:h}}function st(m){qt={x:m.clientX,y:m.clientY}}function Ut(m,s){let u=m.relatedTarget;return!(u instanceof Node&&s.contains(u))}function Pi(m,s){return!!(m&&s&&m.right>s.left&&m.left<s.right&&m.bottom>s.top&&m.top<s.bottom)}var $t=new WeakMap;function Ci(m,s,u,h,g,p,...S){u&&u.matches('.workspace-leaf-content[data-type="calendar"] table.calendar td > div')&&(u=u.parentElement);let P=$t.has(u)?$t.get(u):s.hoverPopover;if(P==null?void 0:P.lockedOut)return;if(P&&P.state!==Ee.PopoverState.Hidden&&(!P.isPinned||m.settings.autoPin==="always")&&P.targetEl!==null&&P.originalLinkText===h&&P.originalPath===g&&u&&P.adopt(u))$t.set(u,P);else{let O=new q(s,u,m,m.settings.triggerDelay);u&&$t.set(u,O),O.originalLinkText=h,O.originalPath=g,s.hoverPopover=O;let U=O.abortController,k=function(){!O||(O.lockedOut=!1)},B=function(I){!O||I.target instanceof HTMLElement&&!I.target.closest(".hover-editor, .menu")&&(O.state=Ee.PopoverState.Hidden,O.hide(),O.lockedOut=!0,setTimeout(k,1e3))},{document:W}=O,N=function(I){if(!O)return;let H=Ee.Platform.isMacOS?"Meta":"Control";!O.onHover&&O.state!==Ee.PopoverState.Shown&&I.key!==H?(O.state=Ee.PopoverState.Hidden,O.hide(),O.lockedOut=!0,setTimeout(k,1e3)):W.body.removeEventListener("keyup",N,!0)};W.body.addEventListener("mousedown",B,!0),W.body.addEventListener("keyup",N,!0),U.register(()=>{W.body.removeEventListener("mousedown",B,!0),W.body.removeEventListener("keyup",N,!0)}),setTimeout(()=>{(O==null?void 0:O.state)!=Ee.PopoverState.Hidden&&(O==null||O.openLink(h,g,p))},100)}}var Hn=Ne(require("obsidian")),Rn=class extends Hn.Component{constructor(s,u){super();this.plugin=s;this.win=u}static perWindow(s,u=!0){return new Ai(s,this,u)}},Ai=class extends Hn.Component{constructor(s,u,h=!0){super();this.plugin=s;this.factory=u;this.autocreate=h;this.instances=new WeakMap;s.addChild(this)}onload(){let{workspace:s}=this.plugin.app;this.autocreate&&s.onLayoutReady(()=>{let u=this;s.openPopout&&this.register(re(s,{openPopout(h){return function(){let g=h.call(this);return Promise.resolve(g).then(p=>u.forWindow(p.win)),g}}})),this.forAll()})}forWindow(s=(h=>(h=window.activeWindow)!=null?h:window)(),u=!0){let g=this.instances.get(s);return!g&&u&&(g=new this.factory(this.plugin,s),g&&(this.instances.set(s,g),g.registerDomEvent(s,"beforeunload",()=>{this.removeChild(g),this.instances.delete(s)}),this.addChild(g))),g||void 0}forDom(s,u=!0){return this.forWindow(Ta(s),u)}forLeaf(s,u=!0){return this.forDom(s.containerEl,u)}forView(s,u=!0){return this.forDom(s.containerEl,u)}windows(){let s=[window],{floatingSplit:u}=this.plugin.app.workspace;if(u)for(let h of u.children)h.win&&s.push(h.win);return s}forAll(s=!0){return this.windows().map(u=>this.forWindow(u,s)).filter(u=>u)}};function Ta(m){return(m.ownerDocument||m).defaultView}var ne=Ne(require("obsidian"));function zn(m){let s=Ii(),[u,h]=s(m);if(!u)return!1;if(h||(h="px"),["em","ex","ch","rem","vw","vh","vmin","vmax","%","cm","mm","in","px","pt","pc"].contains(h))return u+h}var Gt={defaultMode:"preview",autoPin:"onMove",triggerDelay:300,closeDelay:600,autoFocus:!0,rollDown:!1,snapToEdges:!1,initialHeight:"340px",initialWidth:"400px",showViewHeader:!1,imageZoom:!0,hoverEmbeds:!1},ka={preview:"Reading view",source:"Editing view",match:"Match current view"},Ma={onMove:"On drag or resize",always:"Always"},Fn=class extends ne.PluginSettingTab{constructor(s,u){super(s,u);this.plugin=u}hide(){}display(){let{containerEl:s}=this;s.empty(),new ne.Setting(s).setName("Default Mode").addDropdown(u=>{u.addOptions(ka),u.setValue(this.plugin.settings.defaultMode),u.onChange(async h=>{this.plugin.settings.defaultMode=h,await this.plugin.saveSettings()})}),new ne.Setting(s).setName("Auto Pin").addDropdown(u=>{u.addOptions(Ma),u.setValue(this.plugin.settings.autoPin),u.onChange(async h=>{this.plugin.settings.autoPin=h,await this.plugin.saveSettings()})}),new ne.Setting(s).setName("Trigger hover preview on embeds").setDesc("Allow hover preview to trigger when hovering over any type of rendered embed such as images or block references").addToggle(u=>u.setValue(this.plugin.settings.hoverEmbeds).onChange(h=>{this.plugin.settings.hoverEmbeds=h,this.plugin.saveSettings()})),new ne.Setting(s).setName("Auto Focus").setDesc("Set the hover editor as the active pane when opened").addToggle(u=>u.setValue(this.plugin.settings.autoFocus).onChange(h=>{this.plugin.settings.autoFocus=h,this.plugin.saveSettings()})),new ne.Setting(s).setName("Minimize downwards").setDesc("When double clicking to minimize, the window will roll down instead of rolling up").addToggle(u=>u.setValue(this.plugin.settings.rollDown).onChange(h=>{this.plugin.settings.rollDown=h,this.plugin.saveSettings()})),new ne.Setting(s).setName("Snap to edges").setDesc(`Quickly arrange popovers by dragging them to the edges of the screen. The left and right edges 
        will maximize the popover vertically. The top edge will maximize the popover to fill the entire 
        screen. Dragging the popovers away from the edges will restore the popver to its original size.`).addToggle(u=>u.setValue(this.plugin.settings.snapToEdges).onChange(h=>{this.plugin.settings.snapToEdges=h,this.plugin.saveSettings()})),new ne.Setting(s).setName("Show view header by default").setDesc(`Show the view header by default when triggering a hover editor.
         When disabled, view headers will only show if you click the view header icon to the left of the minimize button.`).addToggle(u=>u.setValue(this.plugin.settings.showViewHeader).onChange(h=>{this.plugin.settings.showViewHeader=h,this.plugin.saveSettings()})),new ne.Setting(s).setName("Click to zoom image").setDesc(`Click and hold an image within a hover editor to temporarily maximize the popover and image to fill the entire viewport. 
        On mouse up, the hover editor will restore to its original size.`).addToggle(u=>u.setValue(this.plugin.settings.imageZoom).onChange(h=>{this.plugin.settings.imageZoom=h,this.plugin.saveSettings()})),new ne.Setting(s).setName("Initial popover width").setDesc("Enter any valid CSS unit").addText(u=>{u.setPlaceholder(this.plugin.settings.initialWidth),u.inputEl.type="text",u.setValue(this.plugin.settings.initialWidth),u.onChange(async h=>{h=zn(h),h||(h=Gt.initialWidth),this.plugin.settings.initialWidth=h,this.plugin.saveSettings()})}),new ne.Setting(s).setName("Initial popover height").setDesc("Enter any valid CSS unit").addText(u=>{u.setPlaceholder(String(this.plugin.settings.initialHeight)),u.inputEl.type="text",u.setValue(String(this.plugin.settings.initialHeight)),u.onChange(async h=>{h=zn(h),h||(h=Gt.initialHeight),this.plugin.settings.initialHeight=h,this.plugin.saveSettings()})}),new ne.Setting(s).setName("Hover Trigger Delay (ms)").setDesc("How long to wait before showing a Hover Editor when hovering over a link").addText(u=>{u.setPlaceholder(String(this.plugin.settings.triggerDelay)),u.inputEl.type="number",u.setValue(String(this.plugin.settings.triggerDelay)),u.onChange(async h=>{this.plugin.settings.triggerDelay=Number(h),this.plugin.saveSettings()})}),new ne.Setting(s).setName("Hover Close Delay (ms)").setDesc("How long to wait before closing a Hover Editor once the mouse leaves").addText(u=>{u.setPlaceholder(String(this.plugin.settings.closeDelay)),u.inputEl.type="number",u.setValue(String(this.plugin.settings.closeDelay)),u.onChange(async h=>{this.plugin.settings.closeDelay=Number(h),this.plugin.saveSettings()})})}};var Vn=Ne(ji()),Hi=class extends Rn{constructor(){super(...arguments);this.interact=this.createInteractor()}createInteractor(){if(this.win===window)return Vn.default;let s=Vn.default.scope,h=new s.constructor().init(this.win).interactStatic;for(let g of s._plugins.list)h.use(g);return h}onload(){this.win.addEventListener("resize",this.plugin.debouncedPopoverReflow)}onunload(){this.win.removeEventListener("resize",this.plugin.debouncedPopoverReflow),this.interact.removeDocument(this.win.document)}},Bn=class extends Z.Plugin{constructor(){super(...arguments);this.interact=Hi.perWindow(this,!1);this.debouncedPopoverReflow=(0,Z.debounce)(()=>{q.activePopovers().forEach(s=>{var u;(u=s.interact)==null||u.reflow({name:"drag",axis:"xy"})})},100,!0)}async onload(){this.registerActivePopoverHandler(),this.registerFileRenameHandler(),this.registerContextMenuHandler(),this.registerCommands(),this.patchUnresolvedGraphNodeHover(),this.patchWorkspace(),this.patchQuickSwitcher(),this.patchWorkspaceLeaf(),this.patchItemView(),this.patchMarkdownPreviewRenderer(),await this.loadSettings(),this.registerSettingsTab(),this.app.workspace.onLayoutReady(()=>{this.patchSlidingPanes(),this.patchLinkHover(),setTimeout(()=>{this.app.workspace.trigger("css-change")},2e3)})}get activePopovers(){return q.activePopovers()}patchWorkspaceLeaf(){this.register(re(Z.WorkspaceLeaf.prototype,{getRoot(s){return function(){let u=s.call(this);return u.getRoot===this.getRoot?u:u.getRoot()}},onResize(s){return function(){var u;(u=this.view)==null||u.onResize()}},setViewState(s){return async function(u,h){var p,S,P;let g=await s.call(this,u,h);try{let M=q.forLeaf(this);if(M){u.type&&M.hoverEl.setAttribute("data-active-view-type",u.type);let O=M.hoverEl.querySelector(".popover-title");O&&(O.textContent=(p=this.view)==null?void 0:p.getDisplayText(),((P=(S=this.view)==null?void 0:S.file)==null?void 0:P.path)?O.setAttribute("data-path",this.view.file.path):O.removeAttribute("data-path"))}}catch(M){}return g}},setEphemeralState(s){return function(u){var h;s.call(this,u),u.focus&&((h=this.view)==null?void 0:h.getViewType())==="empty"&&(this.view.contentEl.tabIndex=-1,this.view.contentEl.focus())}}}))}patchQuickSwitcher(){let s=this,{QuickSwitcherModal:u}=this.app.internalPlugins.plugins.switcher.instance,h=re(u.prototype,{open(g){return function(){let p=g.call(this);return this.setInstructions([{command:Z.Platform.isMacOS?"cmd p":"ctrl p",purpose:"to open in new popover"}]),this.scope.register(["Mod"],"p",S=>{this.close();let P=this.chooser.values[this.chooser.selectedItem];if(!(P==null?void 0:P.file))return;let M=s.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(M,!1,!0));return M.openFile(P.file),!1}),p}}});this.register(h)}patchItemView(){let s=this,u=re(Z.ItemView.prototype,{onMoreOptionsMenu(h){return function(g,...p){return(this.leaf?q.forLeaf(this.leaf):void 0)?g.addItem(P=>{P.setIcon("popup-open").setTitle("Dock Hover Editor to workspace").onClick(()=>{s.dockPopoverToWorkspace(this.leaf)})}):(g.addItem(P=>{P.setIcon("popup-open").setTitle("Open in Hover Editor").onClick(()=>{var O;let M=s.spawnPopover();((O=this.leaf)==null?void 0:O.getViewState)&&M.setViewState(this.leaf.getViewState())})}),g.addItem(P=>{P.setIcon("popup-open").setTitle("Convert to Hover Editor").onClick(()=>{s.convertLeafToPopover(this.leaf)})})),h.call(this,g,...p)}}});this.register(u)}patchMarkdownPreviewRenderer(){let s=this,u=re(Z.MarkdownPreviewRenderer,{registerDomEvents(h){return function(g,p,...S){return g==null||g.on("mouseover",".internal-embed.is-loaded",(P,M)=>{var O;M&&s.settings.hoverEmbeds&&p.app.workspace.trigger("hover-link",{event:P,source:p.hoverParent.type==="source"?"editor":"preview",hoverParent:p.hoverParent,targetEl:M,linktext:M.getAttribute("src"),sourcePath:((O=p.getFile())==null?void 0:O.path)||""})}),h.call(this,g,p,...S)}}});this.register(u)}patchWorkspace(){let s=!1,u=re(Z.Workspace.prototype,{changeLayout(h){return async function(g){s=!0;try{await h.call(this,g)}finally{s=!1}}},recordHistory(h){return function(g,p,...S){var M;if(!(!((M=this.app.plugins.plugins["pane-relief"])==null?void 0:M._loaded)&&at(g)))return h.call(this,g,p,...S)}},iterateAllLeaves(h){return function(g){this.iterateRootLeaves(g),this.iterateLeaves(g,this.leftSplit),this.iterateLeaves(g,this.rightSplit),this.floatingSplit&&this.iterateLeaves(g,this.floatingSplit)}},iterateRootLeaves(h){return function(g){return h.call(this,g)||!s&&q.iteratePopoverLeaves(this,g)}},getDropLocation(h){return function(p){for(let S of q.activePopovers()){let P=this.recursiveGetTarget(p,S.rootSplit);if(P)return{target:P,sidedock:!1}}return h.call(this,p)}},onDragLeaf(h){return function(g,p){let S=q.forLeaf(p);return S==null||S.togglePin(!0),h.call(this,g,p)}}});this.register(u)}patchSlidingPanes(){var u;let s=(u=this.app.plugins.plugins["sliding-panes-obsidian"])==null?void 0:u.constructor;if(s){let h=re(s.prototype,{handleFileOpen(g){return function(...p){if(!at(this.app.workspace.activeLeaf))return g.call(this,...p)}},handleLayoutChange(g){return function(...p){if(!at(this.app.workspace.activeLeaf))return g.call(this,...p)}},focusActiveLeaf(g){return function(...p){if(!at(this.app.workspace.activeLeaf))return g.call(this,...p)}}});this.register(h)}}patchLinkHover(){let s=this,u=this.app.internalPlugins.plugins["page-preview"];if(!u.enabled)return;let h=re(u.instance.constructor.prototype,{onHoverLink(g){return function(p,...S){return p&&p.event instanceof MouseEvent&&st(p.event),g.call(this,p,...S)}},onLinkHover(g){return function(p,S,P,M,O,...U){Ci(s,p,S,P,M,O,...U)}}});this.register(h),u.disable(),u.enable(),s.register(function(){!u.enabled||(u.disable(),u.enable())})}registerContextMenuHandler(){this.registerEvent(this.app.workspace.on("file-menu",(s,u,h,g)=>{let p=g?q.forLeaf(g):void 0;u instanceof Z.TFile&&!p&&!g&&s.addItem(S=>{S.setIcon("popup-open").setTitle("Open in Hover Editor").onClick(()=>{this.spawnPopover().openFile(u)})})}))}registerActivePopoverHandler(){this.registerEvent(this.app.workspace.on("active-leaf-change",s=>{var h,g,p,S,P;(h=q.activePopover)==null||h.hoverEl.removeClass("is-active");let u=q.activePopover=s?q.forLeaf(s):void 0;if(u&&s){u.hoverEl.addClass("is-active");let M=u.hoverEl.querySelector(".popover-title");if(!M)return;M.textContent=(g=s.view)==null?void 0:g.getDisplayText(),((p=s==null?void 0:s.view)==null?void 0:p.getViewType())&&u.hoverEl.setAttribute("data-active-view-type",s.view.getViewType()),((P=(S=s.view)==null?void 0:S.file)==null?void 0:P.path)?M.setAttribute("data-path",s.view.file.path):M.removeAttribute("data-path")}}))}registerFileRenameHandler(){this.app.vault.on("rename",(s,u)=>{q.iteratePopoverLeaves(this.app.workspace,h=>{var g,p;if(s===((g=h==null?void 0:h.view)==null?void 0:g.file)&&s instanceof Z.TFile){let S=q.forLeaf(h);if(S==null?void 0:S.hoverEl){let P=S.hoverEl.querySelector(".popover-title");if(!P)return;let M=P.getAttribute("data-path");u===M&&(P.textContent=(p=h.view)==null?void 0:p.getDisplayText(),P.setAttribute("data-path",s.path))}}})})}patchUnresolvedGraphNodeHover(){var p,S;let s=new Z.WorkspaceLeaf(this.app),u=this.app.internalPlugins.plugins.graph.views.localgraph(s),h=u.engine.constructor;s.detach(),(S=(p=u.renderer)==null?void 0:p.worker)==null||S.terminate();let g=re(h.prototype,{onNodeHover(P){return function(M,O,U,...k){if(U==="unresolved"){if(this.onNodeUnhover(),M instanceof MouseEvent){if(this.hoverPopover&&this.hoverPopover.state!==Z.PopoverState.Hidden&&this.lastHoverLink===O)return this.hoverPopover.onTarget=!0,void this.hoverPopover.transition();this.lastHoverLink=O,this.app.workspace.trigger("hover-link",{event:M,source:"graph",hoverParent:this,targetEl:null,linktext:O})}}else return P.call(this,M,O,U,...k)}}});this.register(g),s.detach()}onunload(){q.activePopovers().forEach(s=>s.hide())}async loadSettings(){this.settings=Object.assign({},Gt,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommands(){this.addCommand({id:"bounce-popovers",name:"Toggle bouncing popovers",callback:()=>{this.activePopovers.forEach(s=>{s.toggleBounce()})}}),this.addCommand({id:"open-new-popover",name:"Open new Hover Editor",callback:()=>{let s=this.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(s,!1,!0))}}),this.addCommand({id:"open-link-in-new-popover",name:"Open link under cursor in new Hover Editor",checkCallback:s=>{let u=this.app.workspace.getActiveViewOfType(Z.MarkdownView);if(u){if(!s){let h=u.editor.getClickableTokenAt(u.editor.getCursor());if((h==null?void 0:h.type)==="internal-link"){let g=this.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(g,!1,!0));g.openLinkText(h.text,u.file.path)}}return!0}return!1}}),this.addCommand({id:"open-current-file-in-new-popover",name:"Open current file in new Hover Editor",checkCallback:s=>{let u=this.app.workspace.getActiveViewOfType(Z.MarkdownView);if(u){if(!s){let h=this.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(h,!1,!0));h.openFile(u.file)}return!0}return!1}}),this.addCommand({id:"convert-active-pane-to-popover",name:"Convert active pane to Hover Editor",checkCallback:s=>{let{activeLeaf:u}=this.app.workspace;return u?(s||this.convertLeafToPopover(u),!0):!1}}),this.addCommand({id:"dock-active-popover-to-workspace",name:"Dock active Hover Editor to workspace",checkCallback:s=>{let{activeLeaf:u}=this.app.workspace;return u&&q.forLeaf(u)?(s||this.dockPopoverToWorkspace(u),!0):!1}}),this.addCommand({id:"restore-active-popover",name:"Restore active Hover Editor",checkCallback:s=>xi(s)}),this.addCommand({id:"minimize-active-popover",name:"Minimize active Hover Editor",checkCallback:s=>Si(s)}),wi.forEach(s=>{this.addCommand({id:`snap-active-popover-to-${s}`,name:`Snap active Hover Editor to ${s}`,checkCallback:u=>Ei(s,u)})})}convertLeafToPopover(s){if(!s)return;let u=this.spawnPopover(void 0,()=>{let{parentSplit:h}=u,{parentSplit:g}=s;g.removeChild(s),h.replaceChild(0,s,!0),this.app.workspace.setActiveLeaf(s,!1,!0)});return u}dockPopoverToWorkspace(s){if(!!s)return s.parentSplit.removeChild(s),this.app.workspace.rootSplit.insertChild(-1,s),s}spawnPopover(s,u){let h=this.app.workspace.activeLeaf;s||(s=h.containerEl);let g=new q(h,s,this,void 0,u);return g.togglePin(!0),g.attachLeaf()}registerSettingsTab(){this.settingsTab=new Fn(this.app,this),this.addSettingTab(this.settingsTab)}};function jn(m){let s=[];for(let u=0;u<m;u++)s.push((16*Math.random()|0).toString(16));return s.join("")}
